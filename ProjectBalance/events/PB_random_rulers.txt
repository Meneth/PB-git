####################################################
# Randomized Historical Rulers (and Courtiers)     #
#                                                  #
# D-Day scenario customization option invoked      #
# by decision (decisions/PB_customization.txt)     #
#                                                  #
# Realistically randomizes personality, education, #
# and congenital traits from the fully extended    #
# PB trait set.                                    #
####################################################

namespace = pb_rr

# pb_rr.0
#
# Entry point from D-Day customization decision
narrative_event = {
	id      = pb_rr.0
	title   = pb_rr.0.title
	desc    = pb_rr.0.desc
	picture = GFX_evt_family
	border  = GFX_event_narrative_frame_religion
	
	hide_from = yes
	is_triggered_only = yes
	
	option = {
		name = pb_rr.0.opt.notme # Everyone but me
		trigger = { # Single-player
			NOT = {
				any_playable_ruler = {
					ai = no
					NOT = { character = ROOT }
				}
			}
		}
		
		custom_tooltip = {
			text = pb_rr.0.opt.notme.ctt
			hidden_tooltip = {
				e_rebels = { owner = { character_event = { id = pb_rr.1 } } }
			}
		}
	}
	
	option = {
		name = pb_rr.0.opt.notme_mp # Everyone but us
		trigger = { # Multi-player
			any_playable_ruler = {
				ai = no
				NOT = { character = ROOT }
			}
		}
		
		custom_tooltip = {
			text = pb_rr.0.opt.notme_mp.ctt
			hidden_tooltip = {
				e_rebels = { owner = { character_event = { id = pb_rr.1 } } }
				#TODO: notify other players
			}
		}
	}
	
	option = {
		name = pb_rr.0.opt.all # Everyone
		trigger = { # Single-player
			NOT = {
				any_playable_ruler = {
					ai = no
					NOT = { character = ROOT }
				}
			}
		}
		
		set_global_flag = random_rulers_all
		
		custom_tooltip = {
			text = pb_rr.0.opt.all.ctt
			hidden_tooltip = {
				e_rebels = { owner = { character_event = { id = pb_rr.1 } } }
			}
		}
		
		clr_global_flag = random_rulers_all
	}
	
	option = {
		name = pb_rr.0.opt.all_mp # Everyone
		trigger = { # Multi-player
			any_playable_ruler = {
				ai = no
				NOT = { character = ROOT }
			}
		}
		
		set_global_flag = random_rulers_all
		
		custom_tooltip = {
			text = pb_rr.0.opt.all_mp.ctt
			hidden_tooltip = {
				e_rebels = { owner = { character_event = { id = pb_rr.1 } } }
				#TODO: notify other players
			}
		}
		
		clr_global_flag = random_rulers_all
	}
	
	option = {
		name = pb_rr.0.opt.cancel # Nevermind
	}
}


# pb_rr.1
#
# Top-level randomization event
#
# ROOT = Rebels
# FROM = player that initiated randomization
character_event = {
	id = pb_rr.1
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	
	option = {
		name = OK
		
		set_global_flag = random_rulers
		
		
	}
}
