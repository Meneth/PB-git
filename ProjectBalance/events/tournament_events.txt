################################################
#
# Events for Tournament
#
# ID 70000 - 70999 is reserved
#
#################################################
#
# Written by Chris King
#
# Rewritten by Niklas Strid
#
# edited for AGOT by Knuckey
#
# ported back to CK2 and Duel Engine stuff added by "jordarkelf"

###
# Setup events
###
# Invitation
letter_event = {
	id = 70000
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70000"
	picture = "GFX_evt_courier"

	is_triggered_only = yes
	
	prisoner = no
	capable_only = yes
	min_age = 15
	
	trigger = {
		is_feudal = yes
		war = no
		is_pregnant = no
		OR = {
			religion = catholic
			AND = {
				OR = {
					religion_group = christian
					religion = norse_pagan
					religion = finnish_pagan
				}
				OR = { 
					trait = skilled_warrior
					trait = master_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
					trait = martial_cleric
					has_job_title = job_marshal
					is_ruler = yes
				}
			}	
		}	
		NOT = { has_job_title = job_spiritual }
		OR = {
			is_female = no
			AND = {
				trait = brave
				trait = strong
				OR = {
					trait = trained_warrior
					trait = skilled_warrior
					trait = master_warrior
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
					trait = martial_cleric
					has_job_title = job_marshal
					is_ruler = yes
				}
			}
		}
		OR = {		
			trait = master_warrior
			trait = skilled_tactician
			trait = brilliant_strategist
			AND = {
				NOT = { age = 60 }
				OR = {
					trait = skilled_warrior
					trait = tough_soldier
					trait = martial_cleric
				}
			}
			AND = {
				NOT = { age = 50 }
				OR = {
					trait = trained_warrior
					trait = misguided_warrior
					has_job_title = job_marshal
				}
			}
			NOT = { age = 40 }
		}
		NOT = { has_character_flag = tourny_in_progress }
		NOT = { has_character_flag = attending_tournament }
		NOT = {
			AND = {
				FROM = { tier = COUNT }
				has_character_flag = no_small_tournies
			}
		}
		NOT = {
			AND = {
				FROM = { tier = DUKE }
				has_character_flag = no_regional_tournies
			}
		}
		NOT = { has_character_flag = no_tournies_ever }
	}
	
	immediate = {
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
		clr_character_flag = medal_assigned
		clr_character_flag = jousted_tournament
		clr_character_flag = no_more_jousts
		set_variable = { which = tournament_rounds value = 0 }
		set_variable = { which = tournament_win value = 0 }
		set_variable = { which = tournament_loss value = 0 }
	}

	option = {
		name = "EVTOPTA70000"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.2
				OR = {
					has_character_flag = small_tourny_1st
					has_character_flag = small_tourny_2nd
					has_character_flag = small_tourny_3rd
				}	
			}
			modifier = {
				factor = 1.4
				OR = {
					has_character_flag = grand_tourny_3rd
					has_character_flag = normal_tourny_2nd
					has_character_flag = normal_tourny_3rd
				}	
			}
			modifier = {
				factor = 2
				OR = {
					has_character_flag = grand_tourny_1st
					has_character_flag = grand_tourny_2nd
					has_character_flag = normal_tourny_1st
				}	
			}
			modifier = {
				factor = 2
				trait = brave
			}
			modifier = {
				factor = 2
				trait = duelist
			}
			modifier = {
				factor = 1.5
				trait = duelist
			}
			modifier = {
				factor = 1.2
				trait = strong
			}
			modifier = {
				factor = 1.2
				trait = diligent
			}
			modifier = {
				factor = 1.2
				trait = wroth
			}
			modifier = {
				factor = 1.2
				trait = gregarious
			}
			modifier = {
				factor = 1.2
				trait = ambitious
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  20 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  40 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  60 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  80 }
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = 50
			set_character_flag = king_tourny
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = 30
			set_character_flag = grand_tourny
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = 20
			set_character_flag = normal_tourny
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = 10
			set_character_flag = small_tourny
		}			
		set_character_flag = attending_tournament
		hidden_tooltip = {
			opinion = {
				modifier = opinion_attending_tournament
				who = FROM
				years = 100
			}
			any_dynasty_member = { 
				limit = { 
					is_close_relative = ROOT
					same_realm = ROOT
					is_alive = yes
				}
				letter_event = { id = 70086 days = 7 } 
			}
		}	
	}
	option = {
		name = "EVTOPTB70000"
		trigger = {
			lower_tier_than = FROM
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 1.2
				trait = weak
			}
			modifier = {
				factor = 1.2
				trait = slothful
			}
			modifier = {
				factor = 1.2
				trait = shy
			}
			modifier = {
				factor = 1.2
				trait = content
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -20 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -40 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -60 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -80 } }
			}
			modifier = {
				factor = 2
				trait = dwarf
			}
			modifier = {
				factor = 2
				is_ill = yes
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -100
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -60
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -40
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -20
		}	
	}
	option = {
		name = "EVTOPTC70000"
		trigger = {
			NOT = { lower_tier_than = FROM }
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = craven
			}
			modifier = {
				factor = 1.2
				trait = weak
			}
			modifier = {
				factor = 1.2
				trait = slothful
			}
			modifier = {
				factor = 1.2
				trait = shy
			}
			modifier = {
				factor = 1.2
				trait = content
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -20 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -40 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -60 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value =  -80 } }
			}
			modifier = {
				factor = 2
				trait = dwarf
			}
			modifier = {
				factor = 2
				is_ill = yes
			}
			modifier = { 
				factor = 2
				tier = EMPEROR
				FROM = { tier = COUNT }
			}
			modifier = { 
				factor = 1.5
				tier = KING
				FROM = { tier = COUNT }
			}
			modifier = { 
				factor = 1.5
				tier = EMPEROR
				FROM = { tier = DUKE }
			}
		}
	}
	option = {
		name = "EVTOPTE70000"
		ai_chance = { factor = 0 }
		trigger = { FROM = { tier = COUNT } }
		set_character_flag = no_small_tournies
		prestige = -20
	}
	option = {
		name = "EVTOPTF70000"
		ai_chance = { factor = 0 }
		trigger = { FROM = { tier = DUKE } }
		set_character_flag = no_regional_tournies
		prestige = -40
	}
	option = {
		name = "EVTOPTD70000"
		ai_chance = { factor = 0 }
		set_character_flag = no_tournies_ever
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -100
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -60
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -40
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -20
		}	
	}
}	

# uneligible lords Invited to spectate
letter_event = {
	id = 70086
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70086"
	picture = "GFX_evt_courier"

	is_triggered_only = yes
	
	prisoner = no
	capable_only = yes
	
	trigger = {
		is_feudal = yes
		war = no
		NOT = { has_job_title = job_spiritual }
		NOT = { has_character_flag = tourny_in_progress }
		NOT = { has_character_flag = attending_tournament }
		NOT = {
			AND = {
				FROM = { tier = COUNT } 
				has_character_flag = no_small_tournies
			}
		}
		NOT = {
			AND = {
				FROM = { tier = DUKE } 
				has_character_flag = no_regional_tournies
			}
		}
		NOT = { has_character_flag = no_tournies_ever }
	}
	
	immediate = {
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
		clr_character_flag = medal_assigned
		clr_character_flag = jousted_tournament
		clr_character_flag = no_more_jousts
		set_variable = { which = tournament_rounds value = 0 }
		set_variable = { which = tournament_win value = 0 }
		set_variable = { which = tournament_loss value = 0 }
	}

	option = {
		name = "EVTOPTA70086"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.2
				OR = {
					has_character_flag = small_tourny_1st
					has_character_flag = small_tourny_2nd
					has_character_flag = small_tourny_3rd
				}	
			}
			modifier = {
				factor = 1.4
				OR = {
					has_character_flag = grand_tourny_3rd
					has_character_flag = normal_tourny_2nd
					has_character_flag = normal_tourny_3rd
				}	
			}
			modifier = {
				factor = 2
				OR = {
					has_character_flag = grand_tourny_1st
					has_character_flag = grand_tourny_2nd
					has_character_flag = normal_tourny_1st
				}	
			}
			modifier = {
				factor = 1.2
				trait = diligent
			}
			modifier = {
				factor = 1.2
				trait = wroth
			}
			modifier = {
				factor = 1.4
				trait = proud
			}
			modifier = {
				factor = 1.4
				trait = gregarious
			}
			modifier = {
				factor = 1.4
				trait = ambitious
			}
			modifier = {
				factor = 1.4
				opinion = { who = FROM value =  20 }
			}
			modifier = {
				factor = 1.4
				opinion = { who = FROM value =  40 }
			}
			modifier = {
				factor = 1.4
				opinion = { who = FROM value =  60 }
			}
			modifier = {
				factor = 1.4
				opinion = { who = FROM value =  80 }
			}
		}		
		set_character_flag = attending_tournament
		set_character_flag = tournament_spectator
		hidden_tooltip = {
			opinion = {
				modifier = opinion_spectating_tournament
				who = FROM
				years = 100
			}
		}	
	}
	option = {
		name = "EVTOPTB70086"
		trigger = {
			lower_tier_than = FROM
		}
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.2
				trait = slothful
			}
			modifier = {
				factor = 1.4
				trait = shy
			}
			modifier = {
				factor = 1.2
				trait = content
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -20 } }
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -40 } }
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -60 } }
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -80 } }
			}
			modifier = {
				factor = 2
				is_ill = yes
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -50
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -30
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -20
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -10
		}	
	}
	option = {
		name = "EVTOPTC70000"
		trigger = {
			NOT = { lower_tier_than = FROM }
		}
		ai_chance = {
			factor = 75
			modifier = {
				factor = 1.2
				trait = slothful
			}
			modifier = {
				factor = 1.4
				trait = shy
			}
			modifier = {
				factor = 1.2
				trait = content
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -20 } }
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -40 } }
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -60 } }
			}
			modifier = {
				factor = 1.4
				NOT = { opinion = { who = FROM value =  -80 } }
			}
			modifier = {
				factor = 2
				is_ill = yes
			}
		}
	}
	option = {
		name = "EVTOPTE70000"
		ai_chance = { factor = 0 }
		trigger = { FROM = { tier = COUNT } } 
		set_character_flag = no_small_tournies
		prestige = -10
	}
	option = {
		name = "EVTOPTF70000"
		ai_chance = { factor = 0 }
		trigger = { FROM = { tier = DUKE } } 
		set_character_flag = no_regional_tournies
		prestige = -20
	}
	option = {
		name = "EVTOPTD70000"
		ai_chance = { factor = 0 }
		set_character_flag = no_tournies_ever
		if = { 
			limit = { FROM = { tier = EMPEROR } } 
			prestige = -50
		}	
		if = { 
			limit = { FROM = { tier = KING } } 
			prestige = -30
		}
		if = { 
			limit = { FROM = { tier = DUKE } } 
			prestige = -20
		}
		if = { 
			limit = { FROM = { tier = COUNT } } 
			prestige = -10
		}	
	}
}	

# Invitations have gone out
character_event = {
	id = 70033
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70033"
	picture = "GFX_evt_courier"

	is_triggered_only = yes

	immediate = {
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
		clr_character_flag = medal_assigned
		clr_character_flag = jousted_tournament
		clr_character_flag = no_more_jousts
		set_variable = { which = tournament_rounds value = 0 }
		set_variable = { which = tournament_win value = 0 }
		set_variable = { which = tournament_loss value = 0 }
	}

	option = {
		name = "EVTOPTA70033"
		set_character_flag = attending_tournament
		if = { 
			limit = { tier = EMPEROR }
			set_character_flag = king_tourny
		}	
		if = { 
			limit = { tier = KING }
			set_character_flag = grand_tourny
		}
		if = { 
			limit = { tier = DUKE }
			set_character_flag = normal_tourny
		}
		if = { 
			limit = { tier = COUNT }
			set_character_flag = small_tourny
		}
	}
}

# Start of tournament
character_event = {
	id = 70001
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70001"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA70001"
		trigger = {
			war = no
		}
		hidden_tooltip = {
			set_character_flag = tournament_begins
			set_character_flag = attending_tournament
			set_character_flag = tournament_60_days
		}
	}
	option = {
		name = "EVTOPTB70001"
		trigger = {
			war = yes
		}
		if = { limit = { tier = EMPEROR }
			prestige = -250
			wealth = 400
		}	
		if = { limit = { tier = KING }
			prestige = -175
			wealth = 300
		}	
		if = { limit = { tier = DUKE }
			prestige = -100
			wealth = 150
		}	
		if = { limit = { tier = COUNT }
			prestige = -50
			wealth = 75
		}	
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70037 }
				}
			}	
		}
		clr_character_flag = attending_tournament
		clr_character_flag = tournament_spectator
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
		clr_character_flag = tourny_outcome_1
		clr_character_flag = tourny_outcome_2
		clr_character_flag = tourny_outcome_3
		clr_character_flag = tourny_outcome_4
	}
}

# Tournament has been cancelled
character_event = {
	id = 70037
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70037"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70037"
		if = { 
			limit = { 
				FROM = { tier = EMPEROR } 
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
			}
			prestige = -50
		}	
		if = { 
			limit = { 
				FROM = { tier = KING } 
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
			}
			prestige = -30
		}
		if = { 
			limit = { 
				FROM = { tier = DUKE } 
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
			}
			prestige = -20
		}
		if = { 
			limit = { 
				FROM = { tier = COUNT } 
				has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
			}
			prestige = -10
		}	
		clr_character_flag = attending_tournament
		clr_character_flag = tournament_spectator
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
		clr_character_flag = tourny_outcome_1
		clr_character_flag = tourny_outcome_2
		clr_character_flag = tourny_outcome_3
		clr_character_flag = tourny_outcome_4
		hidden_tooltip = {	
			remove_opinion = {
				modifier = opinion_attending_tournament
				who = FROM
			}
			remove_opinion = {
				modifier = opinion_spectating_tournament
				who = FROM
			}
		}
	}
}

# Ruler has died, the tournament is over
character_event = {
	id = 70041
	title = TOURNAMENTTITLE
	desc = EVTDESC70041
	picture = GFX_evt_death

	is_triggered_only = yes
	
	trigger = {
		has_character_flag = tournament_begins
	}
	
	option = {
		name = EVTOPTA70041
		clr_character_flag = tournament_begins
		clr_character_flag = tournament_60_days
		clr_character_flag = winner
		clr_character_flag = second_place
		clr_character_flag = third_place
		clr_character_flag = attending_tournament
		clr_character_flag = attending_tournament_event
		clr_character_flag = tournament_third_place
		clr_character_flag = tournament_second_place
		clr_character_flag = tournament_winner
		clr_character_flag = tournament_spectator
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
		clr_character_flag = tourny_outcome_1
		clr_character_flag = tourny_outcome_2
		clr_character_flag = tourny_outcome_3
		clr_character_flag = tourny_outcome_4
		clr_character_flag = jousted_tournament
		clr_character_flag = no_more_jousts
		set_variable = { which = tournament_rounds value = 0 }
		set_variable = { which = tournament_win value = 0 }
		set_variable = { which = tournament_loss value = 0 }
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = attending_tournament
					OR = {
						has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
						has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
					}	
				}
				letter_event = { id = 70042 }
			}
		}
	}
}

#The tournament has been cancelled due to Ruler's death
letter_event = {
	id = 70042
	title = TOURNAMENTTITLE
	desc = EVTDESC70042
	picture = GFX_evt_death
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA70042
		hidden_tooltip = {
			clr_character_flag = attending_tournament
			clr_character_flag = tournament_spectator
			clr_character_flag = king_tourny
			clr_character_flag = grand_tourny
			clr_character_flag = normal_tourny
			clr_character_flag = small_tourny
			clr_character_flag = tourny_outcome_1
			clr_character_flag = tourny_outcome_2
			clr_character_flag = tourny_outcome_3
			clr_character_flag = tourny_outcome_4
			clr_character_flag = jousted_tournament
			clr_character_flag = no_more_jousts
			set_variable = { which = tournament_rounds value = 0 }
			set_variable = { which = tournament_win value = 0 }
			set_variable = { which = tournament_loss value = 0 }
			remove_opinion = {
				modifier = opinion_attending_tournament
				who = FROM
			}
			remove_opinion = {
				modifier = opinion_spectating_tournament
				who = FROM
			}
		}
	}
}

###
# Joust results handlers
###
# Character is killed
character_event = {
	id = 70009
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70009"
	picture = "GFX_evt_death"

	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = attending_tournament
	}
	
	option = {
		name = "EVTOPTA70009"
		#death = {
		#	death_reason = death_battle
		#}
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70038 } 
				}
				any_realm_lord = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}	
					character_event = { id = 70038 } 
				}	
			}
		}
	}
}

# Character is maimed
character_event = {
	id = 70010
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70010"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	immediate = {
		clr_character_flag = attending_tournament
	}

	option = {
		name = "EVTOPTA70010"
		add_trait = maimed
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70039 } 
				}	
				any_realm_lord = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}	
					character_event = { id = 70039 } 
				}	
			}
		}
	}
}	

# Character is wounded
character_event = {
	id = 70011
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70011"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70011"
		add_trait = wounded
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70040 } 
				}	
				any_realm_lord = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}	
					character_event = { id = 70040 } 
				}	
			}
		}
	}
}	

# Message about death
character_event = {
	id = 70038
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70038"
	picture = "GFX_evt_death"
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_character_flag = no_msg_death }
		NOT = { has_character_flag = tournament_has_ended }
	}
	
	option = {
		name = "EVTOPTA70038"
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70089 }  
				}
			}	
		}
	}
	option = {
		name = "EVTOPTB70038"
		set_character_flag = no_msg_death
	}
}

# Message about maimed
character_event = {
	id = 70039
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70039"
	picture = "GFX_evt_emissary"
	
	is_triggered_only = yes

	trigger = {
		NOT = { has_character_flag = no_msg_maimed }
		NOT = { has_character_flag = tournament_has_ended }
	}
	
	option = {
		name = "EVTOPTA70038"
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70090 }  
				}
			}	
		}
	}
	option = {
		name = "EVTOPTB70038"
		set_character_flag = no_msg_maimed
	}
}

# Message about wounded
character_event = {
	id = 70040
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70040"
	picture = "GFX_evt_emissary"

	trigger = {
		NOT = { has_character_flag = no_msg_wounded }
		NOT = { has_character_flag = tournament_has_ended }
	}
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70038"
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70091 }  
				}
			}	
		}
	}
	option = {
		name = "EVTOPTB70038"
		set_character_flag = no_msg_wounded
	}
}

###
# End of Tournament
###
# Tournament is over
character_event = {
	id = 70002
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70002"
	picture = "GFX_evt_joust"
	
	only_rulers = yes

	trigger = {
		had_character_flag = {
			flag = tournament_60_days
			days = 60
		}
		has_character_flag = winner
		has_character_flag = second_place
		has_character_flag = third_place
	}	
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "EVTOPTA70002"
		clr_character_flag = tournament_60_days
		clr_character_flag = tourny_in_progress
		clr_character_flag = tournament_begins
		clr_character_flag = winner
		clr_character_flag = second_place
		clr_character_flag = third_place
		clr_character_flag = attending_tournament
		clr_character_flag = attending_tournament_event
		clr_character_flag = tournament_third_place
		clr_character_flag = tournament_second_place
		clr_character_flag = tournament_winner
		clr_character_flag = no_msg_death
		clr_character_flag = no_msg_maimed
		clr_character_flag = no_msg_wounded
		clr_character_flag = no_msg_knight
		clr_character_flag = jousted_tournament
		clr_character_flag = no_more_jousts
		set_variable = { which = tournament_rounds value = 0 }
		set_variable = { which = tournament_win value = 0 }
		set_variable = { which = tournament_loss value = 0 }
		set_character_flag = tournament_has_ended
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						has_character_flag = attending_tournament
						has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
						OR = {
							has_character_flag = tournament_third_place
							has_character_flag = tournament_second_place
							has_character_flag = tournament_winner
						}
					}
					set_character_flag = tournament_has_ended
					clr_character_flag = tournament_third_place
					clr_character_flag = tournament_second_place
					clr_character_flag = tournament_winner
					clr_character_flag = jousted_tournament
					clr_character_flag = no_more_jousts
					set_variable = { which = tournament_rounds value = 0 }
					set_variable = { which = tournament_win value = 0 }
					set_variable = { which = tournament_loss value = 0 }
					reverse_opinion = {
						modifier = opinion_tournament_participant
						who = ROOT
						years = 2
					}
					clr_character_flag = attending_tournament
					clr_character_flag = attending_tournament_event
					clr_character_flag = king_tourny
					clr_character_flag = grand_tourny
					clr_character_flag = normal_tourny
					clr_character_flag = small_tourny
					clr_character_flag = tourny_outcome_1
					clr_character_flag = tourny_outcome_2
					clr_character_flag = tourny_outcome_3
					clr_character_flag = tourny_outcome_4
					hidden_tooltip = {	
						remove_opinion = {
							modifier = opinion_attending_tournament
							who = ROOT
						}
					}
				}
				any_realm_character = {
					limit = {
						has_character_flag = attending_tournament
						has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
						NOT = {
							character = ROOT
						}
						NOT = {
							has_character_flag = tournament_third_place
						}
						NOT = {
							has_character_flag = tournament_second_place
						}
						NOT = {
							has_character_flag = tournament_winner
						}
					}
					hidden_tooltip = {
						if = {
							limit = { ai = yes }
							character_event = { id = 70093 }
						}
						if = {
							limit = { 
								ai = no
								has_character_flag = tourny_outcome_1
							}
							character_event = { id = 70004 }
						}
						if = {
							limit = { 
								ai = no
								has_character_flag = tourny_outcome_2
							}
							character_event = { id = 70003 }
						}
						if = {
							limit = { 
								ai = no
								has_character_flag = tourny_outcome_3
							}
							character_event = { id = 70005 }
						}
						if = {
							limit = { 
								ai = no
								has_character_flag = tourny_outcome_4
							}
							character_event = { id = 70006 }
						}
					}
					set_character_flag = tournament_has_ended
					reverse_opinion = {
						modifier = opinion_tournament_participant
						who = ROOT
						years = 2
					}
					hidden_tooltip = {	
						remove_opinion = {
							modifier = opinion_attending_tournament
							who = ROOT
						}
					}
					clr_character_flag = attending_tournament
					clr_character_flag = attending_tournament_event
					clr_character_flag = king_tourny
					clr_character_flag = grand_tourny
					clr_character_flag = normal_tourny
					clr_character_flag = small_tourny
					clr_character_flag = tourny_outcome_1
					clr_character_flag = tourny_outcome_2
					clr_character_flag = tourny_outcome_3
					clr_character_flag = tourny_outcome_4
				}
				any_realm_character = {
					limit = {
						has_character_flag = attending_tournament
						has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						NOT = { character = ROOT }
					}
					set_character_flag = tournament_has_ended
					reverse_opinion = {
						modifier = opinion_tournament_spectator
						who = ROOT
						years = 2
					}
					hidden_tooltip = {
						character_event = { id = 70092 days = 3 } 
					}	
					hidden_tooltip = {	
						remove_opinion = {
							modifier = opinion_spectating_tournament
							who = ROOT
						}
					}
					clr_character_flag = attending_tournament
					clr_character_flag = tournament_spectator
					clr_character_flag = attending_tournament_event
					clr_character_flag = king_tourny
					clr_character_flag = grand_tourny
					clr_character_flag = normal_tourny
					clr_character_flag = small_tourny
				}
			}
			if = { 
				limit = {
					OR = { tier = KING
							tier = EMPEROR
					}		
				}	
				top_liege = {
					any_realm_character = {
						limit = {
							is_female = yes
							OR = {
								has_character_flag = queen_love_beauty_1
								has_character_flag = queen_love_beauty_2
								has_character_flag = queen_love_beauty_3
								has_character_flag = queen_love_beauty_4
							}
						}
						clr_character_flag = queen_love_beauty_1
						clr_character_flag = queen_love_beauty_2
						clr_character_flag = queen_love_beauty_3
						clr_character_flag = queen_love_beauty_4
					}	
				}	
			}
		}
	}
}

# Tournament is over for spectator
character_event = {
	id = 70093
	title = "TOURNAMENTTITLE2"
	desc = AI_EVENT
	picture = "GFX_evt_joust"

	is_triggered_only = yes
	
	option = {
		name = "OUTCOME_1" #Great Outcome
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.05
				OR = {	
					has_character_flag = small_tourny_1st
					has_character_flag = normal_tourny_2nd
					has_character_flag = grand_tourny_3rd
				}
			}
			modifier = {
				factor = 1.1
				OR = {	
					has_character_flag = normal_tourny_1st
					has_character_flag = grand_tourny_2nd
				}
			}
			modifier = {
				factor = 1.15
				has_character_flag = grand_tourny_1st	
			}
			modifier = {
				factor = 1.35
				OR = {
					trait = skilled_warrior
					trait = master_warrior
				}	
			}
			modifier = {
				factor = 1.3
				trait = master_warrior
			}
			modifier = {
				factor = 1.1
				martial = 11
			}
			modifier = {
				factor = 1.1
				martial = 14
			}
			modifier = {
				factor = 1.1
				martial = 17
			}
			modifier = {
				factor = 1.1
				martial = 20
			}
			modifier = {
				factor = 1.1
				martial = 24
			}
			modifier = {
				factor = 1.1
				trait = brave
			}
			modifier = {
				factor = 1.1
				trait = strong
			}
			modifier = {
				factor = 1.1
				trait = tall
			}
			modifier = {
				factor = 1.1
				trait = duelist
			}
			modifier = {
				factor = 1.1
				any_ward = {
					OR = {
						trait = poor_warrior
						trait = trained_warrior
					}	
				}
			}
			modifier = {
				factor = 1.2
				any_ward = {
					OR = {
						trait = skilled_warrior
						trait = master_warrior
					}
				}
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = 60
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = 35
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = 15
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = 8
		}	
		any_dynasty_member = {
			limit = {
				is_close_relative = ROOT
				has_character_flag = tournament_spectator
				has_character_flag = attending_tournament
				has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
			}
			character_event = { id = 70095 }
		}
	}

	option = {
		name = "OUTCOME_2" #Modest Outcome
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.02
				OR = {	
					has_character_flag = small_tourny_1st
					has_character_flag = normal_tourny_2nd
					has_character_flag = grand_tourny_3rd
				}
			}
			modifier = {
				factor = 1.05
				OR = {	
					has_character_flag = normal_tourny_1st
					has_character_flag = grand_tourny_2nd
				}
			}
			modifier = {
				factor = 1.07
				has_character_flag = grand_tourny_1st	
			}
			modifier = {
				factor = 1.17
				OR = {
					trait = skilled_warrior
					trait = master_warrior
				}	
			}
			modifier = {
				factor = 1.15
				trait = master_warrior
			}
			modifier = {
				factor = 1.1
				martial = 11
			}
			modifier = {
				factor = 1.1
				martial = 14
			}
			modifier = {
				factor = 1.1
				martial = 17
			}
			modifier = {
				factor = 1.1
				martial = 20
			}
			modifier = {
				factor = 1.1
				martial = 24
			}
			modifier = {
				factor = 1.1
				trait = brave
			}
			modifier = {
				factor = 1.1
				trait = strong
			}
			modifier = {
				factor = 1.1
				trait = tall
			}
			modifier = {
				factor = 1.1
				trait = duelist
			}
			modifier = {
				factor = 1.1
				any_ward = {
					OR = {
						trait = poor_warrior
						trait = trained_warrior
					}	
				}
			}
			modifier = {
				factor = 1.2
				any_ward = {
					OR = {
						trait = skilled_warrior
						trait = master_warrior
					}
				}
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = 30
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = 20
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = 10
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = 4
		}	
		any_dynasty_member = {
			limit = {
				is_close_relative = ROOT
				has_character_flag = tournament_spectator
				has_character_flag = attending_tournament
				has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
			}
			character_event = { id = 70096 }
		}
	}
	
	option = {
		name = "OUTCOME_3" #Bad outcome
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.15
				age = 40
			}
			modifier = {
				factor = 1.15
				age = 50
			}
			modifier = {
				factor = 1.5
				age = 60
			}
			modifier = {
				factor = 1.5
				age = 70
			}
			modifier = {
				factor = 1.5
				NOT = {
					OR = {
						trait = poor_warrior
						trait = trained_warrior
						trait = skilled_warrior
						trait = master_warrior
					}
				}
			}
			modifier = {
				factor = 1.25
				trait = poor_warrior
			}
			modifier = {
				factor = 1.25
				NOT = { martial = 7 }
			}
			modifier = {
				factor = 1.25
				NOT = { martial = 5 }
			}
			modifier = {
				factor = 1.25
				NOT = { martial = 3 }
			}
			modifier = {
				factor = 1.25
				NOT = { martial = 1 }
			}
			modifier = {
				factor = 1.1
				trait = craven
			}
			modifier = {
				factor = 1.1
				trait = weak
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -30
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -20
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -10
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -4
		}	
		any_dynasty_member = {
			limit = {
				is_close_relative = ROOT
				has_character_flag = tournament_spectator
				has_character_flag = attending_tournament
				has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
			}
			character_event = { id = 70097 }
		}
	}
	option = {
		name = "OUTCOME_4" #very bad outcome
		ai_chance = {
			factor = 25
			modifier = {
				factor = 1.3
				age = 40
			}
			modifier = {
				factor = 1.3
				age = 50
			}
			modifier = {
				factor = 2
				age = 60
			}
			modifier = {
				factor = 2
				age = 70
			}
			modifier = {
				factor = 2
				NOT = {
					OR = {
						trait = poor_warrior
						trait = trained_warrior
						trait = skilled_warrior
						trait = master_warrior
					}
				}
			}
			modifier = {
				factor = 1.5
				trait = poor_warrior
			}
			modifier = {
				factor = 1.5
				NOT = { martial = 7 }
			}
			modifier = {
				factor = 1.5
				NOT = { martial = 5 }
			}
			modifier = {
				factor = 1.5
				NOT = { martial = 3 }
			}
			modifier = {
				factor = 1.5
				NOT = { martial = 1 }
			}
			modifier = {
				factor = 1.1
				trait = craven
			}
			modifier = {
				factor = 1.1
				trait = weak
			}
		}
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -60
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -40
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -20
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -8
		}
		any_dynasty_member = {
			limit = {
				is_close_relative = ROOT
				has_character_flag = tournament_spectator
				has_character_flag = attending_tournament
				has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
			}
			character_event = { id = 70098 }
		}
	}	
}

# End of tournament events
character_event = {
	id = 70003
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70003"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA70003"
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = 30
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = 20
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = 10
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = 4
		}	
		hidden_tooltip = {
			any_dynasty_member = {
				limit = {
					is_close_relative = ROOT
					has_character_flag = tournament_spectator
					has_character_flag = attending_tournament
					has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
				}
				character_event = { id = 70096 } 
			}
		}
	}
}

# Outcome events
character_event = { 
	id = 70004
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70004"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA70004"
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = 60
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = 35
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = 15
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = 8
		}	
		hidden_tooltip = {
			any_dynasty_member = {
				limit = {
					is_close_relative = ROOT
					has_character_flag = tournament_spectator
					has_character_flag = attending_tournament
					has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
				}
				character_event = { id = 70095 }
			}
		}
	}
}

character_event = {
	id = 70005
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70005"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA70005"
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -30
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -20
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -10
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -4
		}	
		hidden_tooltip = {
			any_dynasty_member = {
				limit = {
					is_close_relative = ROOT
					has_character_flag = tournament_spectator
					has_character_flag = attending_tournament
					has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
				}
				character_event = { id = 70097 }
			}
		}
	}
}

character_event = {
	id = 70006
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70006"
	picture = "GFX_evt_joust"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA70006"
		if = { 
			limit = { FROM = { tier = EMPEROR } }
			prestige = -60
		}	
		if = { 
			limit = { FROM = { tier = KING } }
			prestige = -40
		}
		if = { 
			limit = { FROM = { tier = DUKE } }
			prestige = -20
		}
		if = { 
			limit = { FROM = { tier = COUNT } }
			prestige = -8
		}	
		hidden_tooltip = {
			any_dynasty_member = {
				limit = {
					is_close_relative = ROOT
					has_character_flag = tournament_spectator
					has_character_flag = attending_tournament
					has_opinion_modifier = { who = FROM modifier = opinion_spectating_tournament }
				}
				character_event = { id = 70098 }
			}
		}
	}
}

###
# Random stuff during tournament
###
# Character becomes craven
character_event = {
	id = 70012
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70012"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = {
			trait = craven
		}
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.6
			NOT = {
				OR = {
					trait = poor_warrior
					trait = trained_warrior
					trait = skilled_warrior
					trait = master_warrior
				}
			}
		}
		modifier = {
			factor = 0.8
			trait = poor_warrior
		}
		modifier = {
			factor = 1.25
			trait = master_warrior
		}
		modifier = {
			factor = 1.35
			OR = {
				trait = skilled_warrior
				trait = master_warrior
			}	
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70012"
		add_trait = craven
	}
}

# Character becomes brave
character_event = {
	id = 70013
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70013"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = {
			trait = brave
		}
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.4
			NOT = {
				OR = {
					trait = poor_warrior
					trait = trained_warrior
					trait = skilled_warrior
					trait = master_warrior
				}
			}
		}
		modifier = {
			factor = 1.2
			trait = poor_warrior
		}
		modifier = {
			factor = 0.75
			trait = master_warrior
		}
		modifier = {
			factor = 0.65
			OR = {
				trait = skilled_warrior
				trait = master_warrior
			}	
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}	

	option = {
		name = "EVTOPTA70013"
		add_trait = brave
	}
}

# Character gets a combat trait if he has none (ID reused)
character_event = {
	id = 70007
	#title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70014"
	picture = "GFX_evt_melee"

	#in_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = { trait = poor_warrior }
		NOT = { trait = trained_warrior }
		NOT = { trait = skilled_warrior }
		NOT = { trait = master_warrior }
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.3
			trait = craven
		}
		modifier = {
			factor = 0.7
			trait = brave
		}
		modifier = {
			factor = 1.3
			trait = weak
		}
		modifier = {
			factor = 0.7
			trait = strong
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70014"
		add_trait = poor_warrior
	}
}

# Character becomes trained warrior (good)
character_event = {
	id = 70014
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70014"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = poor_warrior
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.3
			trait = craven
		}
		modifier = {
			factor = 0.7
			trait = brave
		}
		modifier = {
			factor = 1.3
			trait = weak
		}
		modifier = {
			factor = 0.7
			trait = strong
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70014"
		add_trait = trained_warrior
	}
}

# Character becomes skilled warrior (good)
character_event = {
	id = 70015
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70015"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = trained_warrior
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 300
		modifier = {
			factor = 1.3
			trait = craven
		}
		modifier = {
			factor = 0.7
			trait = brave
		}
		modifier = {
			factor = 1.3
			trait = weak
		}
		modifier = {
			factor = 0.7
			trait = strong
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70015"
		add_trait = skilled_warrior
	}
}

# Character becomes master_warrior (good)
character_event = {
	id = 70016
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70016"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = skilled_warrior
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 350
		modifier = {
			factor = 1.3
			trait = craven
		}
		modifier = {
			factor = 0.7
			trait = brave
		}
		modifier = {
			factor = 1.3
			trait = weak
		}
		modifier = {
			factor = 0.7
			trait = strong
		}
		modifier = {
			factor = 0.9
			martial = 11
		}
		modifier = {
			factor = 0.9
			martial = 14
		}
		modifier = {
			factor = 0.9
			martial = 17
		}
		modifier = {
			factor = 0.9
			martial = 20
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.2
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70016"
		add_trait = master_warrior
	}
}

# Character becomes skilled_warrior (bad)
character_event = {
	id = 70017
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70017"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = master_warrior 
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.7
			trait = craven
		}
		modifier = {
			factor = 1.3
			trait = brave
		}
		modifier = {
			factor = 0.7
			trait = weak
		}
		modifier = {
			factor = 1.3
			trait = strong
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 1 }
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70017"
		add_trait = skilled_warrior
	}
}

# Character becomes trained_warrior (bad)
character_event = {
	id = 70018
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70018"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = skilled_warrior
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.7
			trait = craven
		}
		modifier = {
			factor = 1.3
			trait = brave
		}
		modifier = {
			factor = 0.7
			trait = weak
		}
		modifier = {
			factor = 1.3
			trait = strong
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 1 }
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70018"
		add_trait = trained_warrior
	}
}

# Character becomes poor_warrior (bad)
character_event = {
	id = 70019
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70019"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = trained_warrior
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.7
			trait = craven
		}
		modifier = {
			factor = 1.3
			trait = brave
		}
		modifier = {
			factor = 0.7
			trait = weak
		}
		modifier = {
			factor = 1.3
			trait = strong
		}
		modifier = {
			factor = 1.1
			martial = 11
		}
		modifier = {
			factor = 1.1
			martial = 14
		}
		modifier = {
			factor = 1.1
			martial = 17
		}
		modifier = {
			factor = 1.1
			martial = 20
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 0.8
			NOT = { martial = 1 }
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70019"
		add_trait = poor_warrior
	}
}

# Character becomes homosexual
character_event = {
	id = 70023
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70023"
	picture = "GFX_evt_shadowy_cabal"

	#min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = { trait = homosexual }
		has_character_flag = attending_tournament
		NOT = { has_character_flag = tournament_spectator }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}

	mean_time_to_happen = {
		months = 1600
		modifier = {
			factor = 0.9
			trait = drunkard
		}
		modifier = {
			factor = 0.9
			trait = excommunicated
		}
		modifier = {
			factor = 0.9
			trait = ugly
		}
		modifier = {
			factor = 1.5
			trait = fair
		}
		modifier = {
			factor = 0.9
			trait = celibate
		}
		modifier = {
			factor = 0.9
			trait = hedonist
		}
		modifier = {
			factor = 0.5
			trait = impaler
		}
		modifier = {
			factor = 1.5
			trait = lustful
		}
		modifier = {
			factor = 0.9
			trait = chaste
		}
		modifier = {
			factor = 3
			trait = zealous
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70023"
		add_trait = homosexual
	}
}

# Character is infatuated with another attendee (id reused)
character_event = {
	id = 70008
	#title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70008"
	picture = "GFX_evt_lovers"

	#min_age = 16
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_lover = no
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
		top_liege = {
			any_realm_character = {
				is_adult = yes
				has_lover = no
				NOT = { is_close_relative = ROOT }
				OR = {
					AND = {
						ROOT = { is_female = no }
						is_female = yes
						NOT = { trait = homosexual }
					}
					AND = {
						ROOT = { is_female = yes }
						is_female = no
						NOT = { trait = homosexual }
					}
					AND = {
						ROOT = { is_female = no }
						is_female = no
						trait = homosexual
						ROOT = { trait = homosexual }
					}
					AND = {
						ROOT = { is_female = yes }
						is_female = yes
						trait = homosexual
						ROOT = { trait = homosexual }
					}
				}
				has_character_flag = attending_tournament
				has_opinion_modifier = { who = PREV modifier = opinion_spectating_tournament }
				NOT = { has_character_flag = attending_tournament_event }
				NOT = { character = ROOT }
			}
		}
	}

	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 1.5
			trait = ugly
		}
		modifier = {
			factor = 0.9
			trait = fair
		}
		modifier = {
			factor = 0.9
			trait = hedonist
		}
		modifier = {
			factor = 0.5
			trait = impaler
		}
		modifier = {
			factor = 0.9
			trait = lustful
		}
		modifier = {
			factor = 2
			trait = chaste
		}
		modifier = {
			factor = 3
			trait = zealous
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70008"
		top_liege = {
			random_realm_character = {
				limit = {
					is_female = no
					is_adult = yes
					has_lover = no
					NOT = { is_close_relative = ROOT }
					OR = {
						AND = {
							is_female = no
							NOT = { trait = homosexual }
						}
						AND = {
							is_female = yes
							trait = homosexual
							ROOT = { trait = homosexual }
						}
					}
					has_character_flag = attending_tournament
					has_opinion_modifier = { who = PREV modifier = opinion_spectating_tournament }
					NOT = { character = ROOT }
				}
				character_event = { id = 70050 days = 1 }
			}
		}
	}
}
# Character gets a chance to accept FROM as lover (id reused)
character_event = { 
	id = 70050
	#title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70050"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70050"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { trait = fair }
			}
			modifier = {
				factor = 2
				trait = hedonist
			}
			modifier = {
				factor = 2
				trait = lustful
			}
		}
		add_lover = FROM
		FROM = { character_event = { id = 70051 days = 1 } }
	}
	option = {
		name = "EVTOPTA70050"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				FROM = { trait = ugly }
			}
			modifier = {
				factor = 2
				trait = impaler
			}
			modifier = {
				factor = 2
				trait = lustful
			}
		}
		FROM = { character_event = { id = 70052 days = 1 } }
	}
}
# Love accepted (id reused)
character_event = { 
	id = 70051
	#title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70051"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTA70051
		add_lover = FROM
	}
}
	
# Character becomes syphilitic
character_event = {
	id = 70024
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70024"
	picture = "GFX_evt_lovers"

	#min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = {
			trait = syphilitic
			trait = celibate
		}
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
		has_global_flag = aztec_syphilis #Syphilis must be active
	}

	mean_time_to_happen = {
		months = 1200
		modifier = {
			factor = 1.5
			trait = ugly
		}
		modifier = {
			factor = 0.9
			trait = fair
		}
		modifier = {
			factor = 0.9
			trait = hedonist
		}
		modifier = {
			factor = 0.5
			trait = impaler
		}
		modifier = {
			factor = 0.9
			trait = lustful
		}
		modifier = {
			factor = 2
			trait = chaste
		}
		modifier = {
			factor = 3
			trait = zealous
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70024"
		add_trait = syphilitic
	}
}

# Character becomes drunkard
character_event = {
	id = 70025
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70025"
	picture = "GFX_evt_drunk"
	
	#min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = { trait = drunkard }
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}

	mean_time_to_happen = {
		months = 700
		modifier = {
			factor = 0.5
			trait = depressed
		}
		modifier = {
			factor = 1.5
			trait = strong
		}
		modifier = {
			factor = 0.9
			trait = dwarf
		}
		modifier = {
			factor = 0.9
			trait = gluttonous
		}
		modifier = {
			factor = 0.9
			trait = lustful
		}
		modifier = {
			factor = 3
			trait = temperate
		}
		modifier = {
			factor = 0.9
			trait = greedy
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70025"
		add_trait = drunkard
	}
}

# Character becomes duelist
character_event = {
	id = 70026
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70026"
	picture = "GFX_evt_melee"
	
	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		NOT = { lifestyle_traits = 1 }
		has_character_flag = attending_tournament
		NOT = { has_character_flag = tournament_spectator }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 700
		modifier = {
			factor = 0.9
			trait = wroth
		}
		modifier = {
			factor = 1.5
			trait = kind
		}
		modifier = {
			factor = 0.9
			trait = proud
		}
		modifier = {
			factor = 1.5
			trait = humble
		}
		modifier = {
			factor = 1.5
			trait = craven
		}
		modifier = {
			factor = 0.9
			trait = brave
		}
		modifier = {
			factor = 1.5
			trait = just
		}
		modifier = {
			factor = 0.9
			trait = cruel
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70026"
		add_trait = duelist
	}
}

# Character gains intrigue
character_event = {
	id = 70027
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70027"
	picture = "GFX_evt_whispers"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.8
			trait = elusive_shadow
		}
		modifier = {
			factor = 0.9
			trait = intricate_webweaver
		}
		modifier = {
			factor = 1.1
			trait = flamboyant_schemer
		}
		modifier = {
			factor = 1.5
			trait = amateurish_plotter
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					trait = elusive_shadow
					trait = intricate_webweaver
					trait = flamboyant_schemer
					trait = amateurish_plotter
				}
			}
		}
		modifier = {
			factor = 0.9
			trait = deceitful
		}
		modifier = {
			factor = 1.5
			trait = honest
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}
	
	immediate = {
		set_character_flag = attending_tournament_event
	}

	option = {
		name = "EVTOPTA70027"
		change_intrigue = 1
	}
}

# Character loses intrigue
character_event = {
	id = 70028
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70028"
	picture = "GFX_evt_whispers"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.5
			trait = elusive_shadow
		}
		modifier = {
			factor = 1.1
			trait = intricate_webweaver
		}
		modifier = {
			factor = 0.9
			trait = flamboyant_schemer
		}
		modifier = {
			factor = 0.8
			trait = amateurish_plotter
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					trait = elusive_shadow
					trait = intricate_webweaver
					trait = flamboyant_schemer
					trait = amateurish_plotter
				}
			}
		}
		modifier = {
			factor = 1.5
			trait = deceitful
		}
		modifier = {
			factor = 0.9
			trait = honest
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70028"
		change_intrigue = -1
	}
}

# Character gains stewardship
character_event = {
	id = 70029
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70029"
	picture = "GFX_evt_market"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.8
			trait = midas_touched
		}
		modifier = {
			factor = 0.9
			trait = fortune_builder
		}
		modifier = {
			factor = 1.1
			trait = thrifty_clerk 
		}
		modifier = {
			factor = 1.5
			trait = indulgent_wastrel
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					trait = midas_touched 
					trait = fortune_builder
					trait = thrifty_clerk 
					trait = indulgent_wastrel
				}
			}
		}
		modifier = {
			factor = 0.9
			trait = diligent 
		}
		modifier = {
			factor = 1.5
			trait = slothful
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70029"
		change_stewardship = 1
	}
}

# Character loses stewardship
character_event = {
	id = 70030
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70030"
	picture = "GFX_evt_market"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.5
			trait = midas_touched 
		}
		modifier = {
			factor = 1.1
			trait = fortune_builder
		}
		modifier = {
			factor = 0.9
			trait = thrifty_clerk 
		}
		modifier = {
			factor = 0.8
			trait = indulgent_wastrel
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					trait = midas_touched
					trait = fortune_builder
					trait = thrifty_clerk 
					trait = indulgent_wastrel
				}
			}
		}
		modifier = {
			factor = 1.5
			trait = diligent 
		}
		modifier = {
			factor = 0.9
			trait = slothful
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70030"
		change_stewardship = -1
	}
}

# Character gains diplomacy
character_event = {
	id = 70031
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70031"
	picture = "GFX_evt_council"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 0.8
			trait = grey_eminence 
		}
		modifier = {
			factor = 0.9
			trait = charismatic_negotiator
		}
		modifier = {
			factor = 1.1
			trait = underhanded_rogue
		}
		modifier = {
			factor = 1.5
			trait = naive_appeaser
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					trait = grey_eminence 
					trait = charismatic_negotiator
					trait = underhanded_rogue
					trait = naive_appeaser
				}
			}
		}
		modifier = {
			factor = 0.9
			trait = gregarious
		}
		modifier = {
			factor = 1.5
			trait = shy
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70031"
		change_diplomacy = 1
	}
}

# Character loses diplomacy
character_event = {
	id = 70032
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70032"
	picture = "GFX_evt_council"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = {
			has_character_flag = tournament_has_ended
		}
		NOT = { has_character_flag = attending_tournament_event }
	}
	
	mean_time_to_happen = {
		months = 250
		modifier = {
			factor = 1.5
			trait = grey_eminence 
		}
		modifier = {
			factor = 1.1
			trait = charismatic_negotiator
		}
		modifier = {
			factor = 0.9
			trait = underhanded_rogue
		}
		modifier = {
			factor = 0.8
			trait = naive_appeaser
		}
		modifier = {
			factor = 1.5
			NOT = {
				OR = {
					trait = grey_eminence 
					trait = charismatic_negotiator
					trait = underhanded_rogue
					trait = naive_appeaser
				}
			}
		}
		modifier = {
			factor = 1.5
			trait = gregarious
		}
		modifier = {
			factor = 0.9
			trait = shy
		}
		modifier = {
			factor = 4
			martial = 10
		}
		modifier = {
			factor = 0.8
			NOT = {
				martial = 5
			}
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
	}
	
	option = {
		name = "EVTOPTA70032"
		change_diplomacy = -1
	}
}

###
# Queen of love and beauty
###
# Choose queen of love and beauty
character_event = {
	id = 70053
	desc = "EVTDESC70053"
	title = "TOURNAMENTTITLE2"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	trigger = {
		OR = {
			is_female = no
			trait = homosexual
		}
	}

	option = {
		name = "EVTOPTA70053"
		ai_chance = { factor = 30 }
		trigger = { 
			top_liege = {
				any_realm_character = {
					has_character_flag = queen_love_beauty_1 
				}
			}	
		}
		top_liege = {
			random_realm_character = {
				limit = { has_character_flag = queen_love_beauty_1 }
				reverse_opinion = {
					modifier = opinion_queen_love_beauty
					who = ROOT
					years = 20
				}
				character_event = { id = 70057 days = 1 tooltip = "EVTTOOLTIP70057" }
			}
		}	
	}
	option = {
		name = "EVTOPTB70053"
		ai_chance = { factor = 30 }
		trigger = { 
			top_liege = {
				any_realm_character = {
					has_character_flag = queen_love_beauty_2
				}
			}	
		}
		top_liege = {
			random_realm_character = {
				limit = { has_character_flag = queen_love_beauty_2 }
				reverse_opinion = {
					modifier = opinion_queen_love_beauty
					who = ROOT
					years = 20
				}
				character_event = { id = 70057 days = 1 tooltip = "EVTTOOLTIP70057" }
			}
		}	
	}
	option = {
		name = "EVTOPTC70053"
		ai_chance = { factor = 30 }
		trigger = { 
			top_liege = {
				any_realm_character = {
					has_character_flag = queen_love_beauty_3
				}
			}	
		}
		top_liege = {
			random_realm_character = {
				limit = { has_character_flag = queen_love_beauty_3 }
				reverse_opinion = {
					modifier = opinion_queen_love_beauty
					who = ROOT
					years = 20
				}
				character_event = { id = 70057 days = 1 tooltip = "EVTTOOLTIP70057" }
			}
		}	
	}
	option = {
		name = "EVTOPTD70053"
		ai_chance = { factor = 10 }
		top_liege = {
			random_realm_character = {
				limit = { has_character_flag = queen_love_beauty_4 }
				reverse_opinion = {
					modifier = opinion_queen_love_beauty
					who = ROOT
					years = 20
				}
				character_event = { id = 70057 days = 1 tooltip = "EVTTOOLTIP70057" }
			}
		}	
	}
}

# queen is informed
character_event = {
	id = 70057
	desc = "EVTDESC70057"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70057"
		prestige = 50
		opinion = {
			modifier = opinion_queen_love_beauty_chosen
			who = FROM
			years = 20
		}
		hidden_tooltip = {
			any_liege = {
				limit = { 
					OR = { 
						tier = KING
						tier = EMPEROR
					}
					has_character_flag = tourny_in_progress			
				}
				character_event = { id = 70058 days = 1 } 
			}
			IF = { 
				limit = {
					OR = { 
						trait = lustful
						trait = poet
						trait = hedonist
					}
				}
				FROM = { character_event = { id = 70074 days = 1 } }
			}
			IF = { 
				limit = {
					NOT = { trait = lustful }
					NOT = { trait = poet }
					NOT = { trait = hedonist }
				}
				random = {
					chance = 50
					FROM = { character_event = { id = 70074 days = 1 } }
				}
			}
		}
	}
}

# tourny holder is informed
character_event = {
	id = 70058
	desc = "EVTDESC70058"
	title = "TOURNAMENTTITLE3"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70058"
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROMFROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70059 }
				}
			}	
		}
	}
}

# tourny participant is informed
character_event = {
	id = 70059
	desc = "EVTDESC70059"
	title = "TOURNAMENTTITLE2"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70058"
		trigger = { 
			NOT = {
				FROM = {
					FROM = {
						dynasty = ROOT
						is_close_relative = ROOT
					}
				}
			}	
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70059"
		trigger = { 
			FROM = {
				FROM = {
					dynasty = ROOT
					is_close_relative = ROOT
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		prestige = 10
	}
}

# pursue queen of love and beauty?
character_event = {
	id = 70074
	desc = "EVTDESC70074"
	picture = GFX_evt_feast
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { trait = chaste }
		NOT = { trait = celibate }
		OR = {
			is_female = no
			trait = homosexual
		}
	}
	
	option = {
		name = "EVTOPTA70074" #pursue
		ai_chance = {
			factor = 15
			modifier = {
				factor = 5
				trait = lustful
			}
			modifier = {
				factor = 4
				is_married = no
			}
			modifier = {
				factor = 2
				FROM = { trait = fair }
			}
			modifier = {
				factor = 2
				trait = homosexual
				FROM = { trait = homosexual }
			}
			modifier = {
				factor = 1.5
				NOT = { age = 40 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value =  30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value =  60 }
			}	
			modifier = {
				factor = 1.5
				opinion = { who = FROM value =  90 }
			}
		}
		FROM = { character_event = { id = 70075 tooltip = "EVTTOOLTIP70075" } }
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				is_married = yes
			}
			modifier = {
				factor = 2
				is_betrothed = yes
			}
			modifier = {
				factor = 2
				FROM = { trait = ugly }
			}
			modifier = {
				factor = 2
				is_close_relative = FROM
			}
			modifier = {
				factor = 1.5
				age = 40
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value =  0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value =  -30 } }
			}	
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value =  -60 } }
			}
		}
		name = "EVTOPTB70074" #no thanks
	}
}

# queen responds
character_event = {
	id = 70075
	desc = "EVTDESC70075"
	picture = GFX_evt_feast
	
	is_triggered_only = yes
		
	option = {
		name = "EVTOPTA70075" #accept
		ai_chance = {
			factor = 10
			modifier = {
				factor = 5
				trait = lustful
			}
			modifier = {
				factor = 2
				FROM = { trait = fair }
			}
			modifier = {
				factor = 2
				trait = homosexual
				FROM = { is_female = yes }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { age = 40 } }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value =  30 }
			}
			modifier = {
				factor = 1.5
				opinion = { who = FROM value =  60 }
			}	
			modifier = {
				factor = 1.5
				opinion = { who = FROM value =  90 }
			}
		}
		FROM = { character_event = { id = 70076 tooltip = "EVTTOOLTIP70076" } }
		add_lover = FROM
	}
	option = {
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				FROM = { age = 40 }
			}
			modifier = {
				factor = 2
				FROM = { trait = ugly }
			}
			modifier = {
				factor = 2
				trait = homosexual
				FROM = { is_female = no }
			}
			modifier = {
				factor = 2
				NOT = { trait = homosexual }
				FROM = { is_female = yes }
			}
			modifier = {
				factor = 2
				is_close_relative = FROM
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value =  0 } }
			}
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value =  -30 } }
			}	
			modifier = {
				factor = 1.5
				NOT = { opinion = { who = FROM value =  -60 } }
			}
		}
		name = "EVTOPTB70075" #no thanks
		FROM = { 
			character_event = { id = 70077 tooltip = "EVTTOOLTIP70077" }
			opinion = {
				modifier = opinion_spurned
				who = ROOT
				years = 10
			}
		}
	}
}

# character informed of new lover
character_event = {
	id = 70076
	desc = "EVTDESC70076"
	picture = "GFX_evt_lovers"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70076"
		add_lover = FROM
	}
}

# character informed of rejection
character_event = {
	id = 70077
	desc = "EVTDESC70077"
	picture = "GFX_evt_quarrel"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70077"
	}
}

###
# Winner selection
###
# Character wins the tournament
character_event = {
	id = 70020
	title = "TOURNAMENTTITLE"
	desc = "EVTDESC70020"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = { has_character_flag = tournament_has_ended }
		NOT = { has_character_flag = tournament_spectator }
		OR = {
			top_liege = {
				had_character_flag = { flag = tournament_begins days = 50 }
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				NOT = {
					has_character_flag = winner
				}
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					had_character_flag = { flag = tournament_begins days = 50 }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					NOT = {
						has_character_flag = winner
					}
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
		OR = {
			AND = {
				check_variable = { which = "tournament_win" value = 5 }
				top_liege = {
					any_realm_lord = {
						NOT = { character = ROOT }
						NOT = { check_variable = { which = "tournament_win" value = 5 } }
					}
				}
			}
			AND = {
				check_variable = { which = "tournament_win" value = 4 }
				top_liege = {
					any_realm_lord = {
						NOT = { character = ROOT }
						NOT = { check_variable = { which = "tournament_win" value = 4 } }
					}
				}
			}
			AND = {
				check_variable = { which = "tournament_win" value = 3 }
				top_liege = {
					any_realm_lord = {
						NOT = { character = ROOT }
						NOT = { check_variable = { which = "tournament_win" value = 3 } }
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		months = 10
		modifier = {
			factor = 0.75
			martial = 8
		}
		modifier = {
			factor = 0.75
			martial = 10
		}
		modifier = {
			factor = 0.75
			martial = 12
		}
		modifier = {
			factor = 0.75
			martial = 14
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 7 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 5 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 3 }
		}
		modifier = {
			factor = 1.25
			NOT = { martial = 1 }
		}
	}

	immediate = {
		set_character_flag = attending_tournament_event
		set_character_flag = tournament_winner
		top_liege = {
			if = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				}
				set_character_flag = winner 
				character_event = { id = 70034 days = 1 } 
			}	
			any_realm_lord = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament } }
				set_character_flag = winner
				character_event = { id = 70034 days = 1 } 
			}	
		}
		if = {
			limit = {
				OR = {
					has_character_flag = king_tourny
					has_character_flag = grand_tourny
				}
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = grand_tourny_1st_1 } 
					NOT = { has_character_flag = grand_tourny_1st } 
				}
				add_character_modifier = { 
					name = grand_tourny_1st_1
					duration = -1
				}
				set_character_flag = grand_tourny_1st
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_1st_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_1st_2
					duration = -1
				}
				remove_character_modifier = grand_tourny_1st_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_1st_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_1st_3
					duration = -1
				}
				remove_character_modifier = grand_tourny_1st_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_1st_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_1st_4
					duration = -1
				}
				remove_character_modifier = grand_tourny_1st_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_1st_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_1st_5
					duration = -1
				}
				remove_character_modifier = grand_tourny_1st_4
				set_character_flag = medal_assigned
			}
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = normal_tourny_1st_1 } 
					NOT = { has_character_flag = normal_tourny_1st } 
				}
				add_character_modifier = { 
					name = normal_tourny_1st_1
					duration = -1
				}
				set_character_flag = normal_tourny_1st
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_1st_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_1st_2
					duration = -1
				}
				remove_character_modifier = normal_tourny_1st_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_1st_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_1st_3
					duration = -1
				}
				remove_character_modifier = normal_tourny_1st_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_1st_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_1st_4
					duration = -1
				}
				remove_character_modifier = normal_tourny_1st_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_1st_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_1st_5
					duration = -1
				}
				remove_character_modifier = normal_tourny_1st_4
				set_character_flag = medal_assigned
			}
		}	
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = small_tourny_1st_1 } 
					NOT = { has_character_flag = small_tourny_1st } 
				}
				add_character_modifier = { 
					name = small_tourny_1st_1
					duration = -1
				}
				set_character_flag = small_tourny_1st
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_1st_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_1st_2
					duration = -1
				}
				remove_character_modifier = small_tourny_1st_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_1st_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_1st_3
					duration = -1
				}
				remove_character_modifier = small_tourny_1st_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_1st_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_1st_4
					duration = -1
				}
				remove_character_modifier = small_tourny_1st_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_1st_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_1st_5
					duration = -1
				}
				remove_character_modifier = small_tourny_1st_4
				set_character_flag = medal_assigned
			}
		}	
	}
	
	option = {
		name = "EVTOPTA70020"
		if = { 
			limit = {
				has_character_flag = king_tourny
			}
			wealth = 125
			prestige = 300
		}
		if = { 
			limit = {
				has_character_flag = grand_tourny
			}
			wealth = 75
			prestige = 200
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			wealth = 50
			prestige = 100	
		}
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			wealth = 25
			prestige = 50
		}
	}
}

# Inform about winner
character_event = {
	id = 70034
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70034"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	immediate = {
		hidden_tooltip = {
			if = {
				limit = {
					OR = { 
						tier = KING
						tier = EMPEROR
					}
				}
				top_liege = {
					random_realm_character = { #attractive
						limit = { 
							is_female = yes 
							age = 15
							NOT = { age = 30 }
							is_married = no
							is_betrothed = no
							trait = fair						
						}
						set_character_flag = queen_love_beauty_1
					}
					random_realm_character = { #prestigious family
						limit = { 
							is_female = yes 
							age = 15
							NOT = { age = 30 }
							is_married = no
							is_betrothed = no
							OR = {
								any_dynasty_member = {
									is_close_relative = PREV
									prestige = 1500
								}	
								any_dynasty_member = { 
									is_close_relative = PREV
									primary_title = { higher_tier_than = DUKE } 
								}
							}	
							NOT = { has_character_flag = queen_love_beauty_1 }
						}
						set_character_flag = queen_love_beauty_2
					}
					random_realm_character = { #high dynasty
						limit = { 
							is_female = yes 
							age = 15
							NOT = { age = 30 }
							is_married = no
							is_betrothed = no
							any_dynasty_member = { primary_title = { higher_tier_than = BARON } }	
							NOT = { trait = ugly }
							NOT = { trait = dwarf }
							NOT = { trait = inbred }
							NOT = { trait = hunchback }
							NOT = { trait = harelip }			
							NOT = { has_character_flag = queen_love_beauty_1 }
							NOT = { has_character_flag = queen_love_beauty_2 }
						}
						set_character_flag = queen_love_beauty_3
					}
					random_realm_character = { #other random
						limit = { 
							is_female = yes 
							age = 15
							NOT = { age = 30 }
							is_married = no
							is_betrothed = no
							NOT = { trait = ugly }
							NOT = { trait = dwarf }
							NOT = { trait = inbred }
							NOT = { trait = hunchback }
							NOT = { trait = harelip }
							NOT = { has_character_flag = queen_love_beauty_1 }
							NOT = { has_character_flag = queen_love_beauty_2 }
							NOT = { has_character_flag = queen_love_beauty_3 }
						}
						set_character_flag = queen_love_beauty_4
					}
					FROM = {
						character_event = { id = 70053 days = 1 }
					}
				}	
			}	
		}	
	}
	
	option = {
		name = "EVTOPTA70034"
		FROM = {
			opinion = {
				modifier = opinion_tournament_winner
				who = ROOT
				years = 20
			}
			clr_character_flag = medal_assigned
		}
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70052 }  
				}
			}	
		}
	}
}

# Character wins second place in the tournament
character_event = {
	id = 70021
	title = "TOURNAMENTTITLE"
	desc = "EVTDESC70021"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = { has_character_flag = tournament_winner }
		NOT = { has_character_flag = tournament_has_ended }
		NOT = { has_character_flag = tournament_spectator }
		OR = {
			top_liege = {
				had_character_flag = { flag = tournament_begins days = 50 }
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = winner
				NOT = { has_character_flag = second_place }
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					had_character_flag = { flag = tournament_begins days = 50 }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = winner
					NOT = { has_character_flag = second_place }
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
		OR = {
			AND = {
				check_variable = { which = "tournament_win" value = 4 }
				top_liege = {
					any_realm_lord = {
						#limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_flag = tournament_winner }
						#}
						NOT = { check_variable = { which = "tournament_win" value = 4 } }
					}
				}
			}
			AND = {
				check_variable = { which = "tournament_win" value = 3 }
				top_liege = {
					any_realm_lord = {
						#limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_flag = tournament_winner }
						#}
						NOT = { check_variable = { which = "tournament_win" value = 3 } }
					}
				}
			}
			AND = {
				check_variable = { which = "tournament_win" value = 2 }
				top_liege = {
					any_realm_lord = {
						#limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_flag = tournament_winner }
						#}
						NOT = { check_variable = { which = "tournament_win" value = 2 } }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_character_flag = attending_tournament_event
		set_character_flag = tournament_second_place
		top_liege = {
			if = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				}
				set_character_flag = second_place
				character_event = { id = 70035 days = 1 } 
			}	
			any_realm_lord = {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament } }
				set_character_flag = second_place
				character_event = { id = 70035 days = 1 } 
			}	
		}
		if = {
			limit = {
				OR = {
					has_character_flag = king_tourny
					has_character_flag = grand_tourny
				}
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = grand_tourny_2nd_1 } 
					NOT = { has_character_flag = grand_tourny_2nd } 
				}
				add_character_modifier = { 
					name = grand_tourny_2nd_1
					duration = -1
				}
				set_character_flag = grand_tourny_2nd
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_2nd_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_2nd_2
					duration = -1
				}
				remove_character_modifier = grand_tourny_2nd_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_2nd_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_2nd_3
					duration = -1
				}
				remove_character_modifier = grand_tourny_2nd_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_2nd_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_2nd_4
					duration = -1
				}
				remove_character_modifier = grand_tourny_2nd_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_2nd_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_2nd_5
					duration = -1
				}
				remove_character_modifier = grand_tourny_2nd_4
				set_character_flag = medal_assigned
			}
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = normal_tourny_2nd_1 } 
					NOT = { has_character_flag = normal_tourny_2nd } 
				}
				add_character_modifier = { 
					name = normal_tourny_2nd_1
					duration = -1
				}
				set_character_flag = normal_tourny_2nd
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_2nd_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_2nd_2
					duration = -1
				}
				remove_character_modifier = normal_tourny_2nd_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_2nd_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_2nd_3
					duration = -1
				}
				remove_character_modifier = normal_tourny_2nd_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_2nd_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_2nd_4
					duration = -1
				}
				remove_character_modifier = normal_tourny_2nd_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_2nd_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_2nd_5
					duration = -1
				}
				remove_character_modifier = normal_tourny_2nd_4
				set_character_flag = medal_assigned
			}
		}	
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = small_tourny_2nd_1 } 
					NOT = { has_character_flag = small_tourny_2nd } 
				}
				add_character_modifier = { 
					name = small_tourny_2nd_1
					duration = -1
				}
				set_character_flag = small_tourny_2nd
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_2nd_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_2nd_2
					duration = -1
				}
				remove_character_modifier = small_tourny_2nd_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_2nd_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_2nd_3
					duration = -1
				}
				remove_character_modifier = small_tourny_2nd_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_2nd_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_2nd_4
					duration = -1
				}
				remove_character_modifier = small_tourny_2nd_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_2nd_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_2nd_5
					duration = -1
				}
				remove_character_modifier = small_tourny_2nd_4
				set_character_flag = medal_assigned
			}
		}			
	}
	
	option = {
		name = "EVTOPTA70021"
		if = { 
			limit = {
				has_character_flag = king_tourny
			}
			wealth = 75
			prestige = 200
		}
		if = { 
			limit = {
				has_character_flag = grand_tourny
			}
			wealth = 50
			prestige = 100
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			wealth = 25
			prestige = 50
		}
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			wealth = 15
			prestige = 25
		}
	}
}

# Inform about second place
character_event = {
	id = 70035
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70035"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70035"
		FROM = {
			opinion = {
				modifier = opinion_tournament_second_place
				who = ROOT
				years = 15
			}
			clr_character_flag = medal_assigned
		}
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70087 }   
				}
			}	
		}
	}
}

# Character wins third place in the tournament
character_event = {
	id = 70022
	title = "TOURNAMENTTITLE"
	desc = "EVTDESC70022"
	picture = "GFX_evt_melee"

	#min_age = 16
	#only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = { has_character_flag = tournament_winner }
		NOT = { has_character_flag = tournament_second_place }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			top_liege = {
				had_character_flag = { flag = tournament_begins days = 50 }
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = winner
				has_character_flag = second_place
				NOT = { has_character_flag = third_place }
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					had_character_flag = { flag = tournament_begins days = 50 }
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = winner
					has_character_flag = second_place
					NOT = { has_character_flag = third_place }
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
		OR = {
			AND = {
				check_variable = { which = "tournament_win" value = 3 }
				top_liege = {
					any_realm_lord = {
						#limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_flag = tournament_winner }
							NOT = { has_character_flag = tournament_second_place }
						#}
						NOT = { check_variable = { which = "tournament_win" value = 3 } }
					}
				}
			}
			AND = {
				check_variable = { which = "tournament_win" value = 2 }
				top_liege = {
					any_realm_lord = {
						#limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_flag = tournament_winner }
							NOT = { has_character_flag = tournament_second_place }
						#}
						NOT = { check_variable = { which = "tournament_win" value = 2 } }
					}
				}
			}
			AND = {
				check_variable = { which = "tournament_win" value = 1 }
				top_liege = {
					any_realm_lord = {
						#limit = { 
							NOT = { character = ROOT }
							NOT = { has_character_flag = tournament_winner }
							NOT = { has_character_flag = tournament_second_place }
						#}
						NOT = { check_variable = { which = "tournament_win" value = 1 } }
					}
				}
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		set_character_flag = attending_tournament_event
		set_character_flag = tournament_third_place
		top_liege = {
			if = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				}
				set_character_flag = third_place
			}	
			any_realm_lord= {
				limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament } }
				set_character_flag = third_place
			}	
		}
		if = {
			limit = {
				OR = {
					has_character_flag = king_tourny
					has_character_flag = grand_tourny
				}
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = grand_tourny_3rd_1 } 
					NOT = { has_character_flag = grand_tourny_3rd } 
				}
				add_character_modifier = { 
					name = grand_tourny_3rd_1
					duration = -1
				}
				set_character_flag = grand_tourny_3rd
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_3rd_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_3rd_2
					duration = -1
				}
				remove_character_modifier = grand_tourny_3rd_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_3rd_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_3rd_3
					duration = -1
				}
				remove_character_modifier = grand_tourny_3rd_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_3rd_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_3rd_4
					duration = -1
				}
				remove_character_modifier = grand_tourny_3rd_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = grand_tourny_3rd_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = grand_tourny_3rd_5
					duration = -1
				}
				remove_character_modifier = grand_tourny_3rd_4
				set_character_flag = medal_assigned
			}
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = normal_tourny_3rd_1 } 
					NOT = { has_character_flag = normal_tourny_3rd } 
				}
				add_character_modifier = { 
					name = normal_tourny_3rd_1
					duration = -1
				}
				set_character_flag = normal_tourny_3rd
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_3rd_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_3rd_2
					duration = -1
				}
				remove_character_modifier = normal_tourny_3rd_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_3rd_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_3rd_3
					duration = -1
				}
				remove_character_modifier = normal_tourny_3rd_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_3rd_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_3rd_4
					duration = -1
				}
				remove_character_modifier = normal_tourny_3rd_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = normal_tourny_3rd_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = normal_tourny_3rd_5
					duration = -1
				}
				remove_character_modifier = normal_tourny_3rd_4
				set_character_flag = medal_assigned
			}
		}
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			if = {
				limit = { 
					NOT = { has_character_modifier = small_tourny_3rd_1 } 
					NOT = { has_character_flag = small_tourny_3rd } 
				}
				add_character_modifier = { 
					name = small_tourny_3rd_1
					duration = -1
				}
				set_character_flag = small_tourny_3rd
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_3rd_1
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_3rd_2
					duration = -1
				}
				remove_character_modifier = small_tourny_3rd_1
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_3rd_2
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_3rd_3
					duration = -1
				}
				remove_character_modifier = small_tourny_3rd_2
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_3rd_3
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_3rd_4
					duration = -1
				}
				remove_character_modifier = small_tourny_3rd_3
				set_character_flag = medal_assigned
			}
			if = {
				limit = { 
					has_character_modifier = small_tourny_3rd_4
					NOT = { has_character_flag = medal_assigned }
				}
				add_character_modifier = { 
					name = small_tourny_3rd_5
					duration = -1
				}
				remove_character_modifier = small_tourny_3rd_4
				set_character_flag = medal_assigned
			}
		}		
	}
	
	option = {
		name = "EVTOPTA70022"
		if = { 
			limit = {
				has_character_flag = king_tourny
			}
			wealth = 50
			prestige = 100
		}
		if = { 
			limit = {
				has_character_flag = grand_tourny
			}
			wealth = 25
			prestige = 50
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			wealth = 15
			prestige = 25
		}
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			wealth = 10
			prestige = 10
		}
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70036 } 
				}	
				any_realm_lord = {
					limit = { reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament } }
					character_event = { id = 70036 } 
				}	
			}
		}
	}
}

# Inform about third place
character_event = {
	id = 70036
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70036"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70036"
		FROM = {
			opinion = {
				modifier = opinion_tournament_third_place
				who = ROOT
				years = 10
			}
			clr_character_flag = medal_assigned
		}
		hidden_tooltip = {
			top_liege = {
				any_realm_character = {
					limit = {
						NOT = { character = FROM }
						has_character_flag = attending_tournament
						OR = {
							has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
							has_opinion_modifier = { who = ROOT modifier = opinion_spectating_tournament }
						}	
					}
					character_event = { id = 70088 }   
				}
			}	
		}
	}
}

# Unknown Character wins the tournament
character_event = {
	id = 70054
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70054"
	picture = "GFX_evt_melee"
	
	only_rulers = yes
	
	trigger = {
		OR = {
			tier = COUNT
			tier = DUKE
		}
		NOT = {
			any_realm_lord = {
				check_variable = { which = "tournament_win" value = 2 }
			}
		}
		had_character_flag = { flag = tournament_60_days days = 80 }
		NOT = { has_character_flag = winner }
		NOT = { has_character_flag = tournament_has_ended }
	}

	mean_time_to_happen = {
		months = 10

		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 110 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 140 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 170 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 200 }
		}
	}

	immediate = {
		set_character_flag = winner
	}
	
	option = {
		name = "EVTOPTA70054"
		ai_chance = { factor = 95 }
	}
	option = {
		name = "EVTOPTB70054"
		ai_chance = { 
			factor = 5
			modifier = {
				factor = 20 
				had_character_flag = { flag = tournament_60_days days = 250 }
				top_liege = {
					any_realm_lord = {
						NOT = { check_variable = { which = "tournament_win" value = 4 } }
					}
				}
			}
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			culture = ROOT
			female = no
		}
		new_character = {
			remove_trait = weak
			remove_trait = imbecile
			remove_trait = clubfooted
			remove_trait = inbred
			set_character_flag = tournament_winner
			set_character_flag = attending_tournament
			opinion = {
				modifier = opinion_attending_tournament
				who = ROOT
				years = 100
			}
			reverse_opinion = {
				modifier = opinion_tournament_winner
				who = ROOT
				years = 20
			}
			random_list = {
				75 = { add_trait = trained_warrior }
				15 = { add_trait = poor_warrior }
				10 = { add_trait = skilled_warrior }
			}
			if = { 
				limit = {
					ROOT = { tier = DUKE }
				}
				wealth = 50
				prestige = 100
				add_character_modifier = { 
					name = normal_tourny_1st_1
					duration = -1
				}
				set_character_flag = normal_tourny_1st
			}
			if = { 
				limit = {
					ROOT = { tier = COUNT }
				}
				wealth = 25
				prestige = 50
				add_character_modifier = { 
					name = small_tourny_1st_1
					duration = -1
				}
				set_character_flag = small_tourny_1st
			}
		}
	}
}

# random_character comes second
character_event = {
	id = 70055
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70055"
	picture = "GFX_evt_melee"
	
	only_rulers = yes
	
	trigger = {
		OR = {
			tier = COUNT
			tier = DUKE
		}
		NOT = {
			any_realm_lord = {
				check_variable = { which = "tournament_win" value = 2 }
			}
		}
		had_character_flag = { flag = tournament_60_days days = 80 }
		has_character_flag = winner
		NOT = { has_character_flag = second_place }
		NOT = { has_character_flag = tournament_has_ended }
	}

	mean_time_to_happen = {
		months = 2
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 110 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 140 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 170 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 200 }
		}
	}

	immediate = {
		set_character_flag = second_place
	}
	
	option = {
		name = "EVTOPTA70054"
		ai_chance = { factor = 90 }
	}
	option = {
		name = "EVTOPTB70054"
		ai_chance = { 
			factor = 10
			modifier = {
				factor = 10 
				had_character_flag = { flag = tournament_60_days days = 250 }
				top_liege = {
					any_realm_lord = {
						NOT = { check_variable = { which = "tournament_win" value = 1 } }
					}
				}
			}
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			culture = ROOT
			female = no
		}
		new_character = {
			remove_trait = weak
			remove_trait = imbecile
			remove_trait = clubfooted
			remove_trait = inbred
			set_character_flag = tournament_second_place
			set_character_flag = attending_tournament
			opinion = {
				modifier = opinion_attending_tournament
				who = ROOT
				years = 100
			}
			reverse_opinion = {
				modifier = opinion_tournament_second_place
				who = ROOT
				years = 15
			}
			random_list = {
				75 = { add_trait = trained_warrior }
				15 = { add_trait = poor_warrior }
				10 = { add_trait = skilled_warrior }
			}
			if = { 
				limit = {
					ROOT = { tier = DUKE }
				}
				wealth = 25
				prestige = 50
				add_character_modifier = { 
					name = normal_tourny_2nd_1
					duration = -1
				}
				set_character_flag = normal_tourny_2nd
			}
			if = { 
				limit = {
					ROOT = { tier = COUNT }
				}
				wealth = 15
				prestige = 25
				add_character_modifier = { 
					name = small_tourny_2nd_1
					duration = -1
				}
				set_character_flag = small_tourny_2nd
			}
		}
	}
}

# random_character comes third
character_event = {
	id = 70056
	title = "TOURNAMENTTITLE3"
	desc = "EVTDESC70056"
	picture = "GFX_evt_melee"
	
	only_rulers = yes
	
	trigger = {
		OR = {
			tier = COUNT
			tier = DUKE
		}
		NOT = {
			any_realm_lord = {
				check_variable = { which = "tournament_win" value = 2 }
			}
		}
		had_character_flag = { flag = tournament_60_days days = 80 }
		has_character_flag = winner
		has_character_flag = second_place
		NOT = { has_character_flag = third_place }
		NOT = { has_character_flag = tournament_has_ended }
	}

	mean_time_to_happen = {
		months = 2
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 110 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 140 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 170 }
		}
		modifier = {
			factor = 0.2
			had_character_flag = { flag = tournament_60_days days = 200 }
		}
	}

	immediate = {
		set_character_flag = third_place
	}
	
	option = {
		name = "EVTOPTA70054"
		ai_chance = { factor = 80 }
	}
	option = {
		name = "EVTOPTB70054"
		ai_chance = { 
			factor = 20
			modifier = {
				factor = 5 
				had_character_flag = { flag = tournament_60_days days = 250 }
				top_liege = {
					any_realm_lord = {
						NOT = { check_variable = { which = "tournament_win" value = 1 } }
					}
				}
			}
		}
		create_random_soldier = {
			random_traits = yes
			dynasty = random
			culture = ROOT
			female = no
		}
		new_character = {
			remove_trait = weak
			remove_trait = imbecile
			remove_trait = clubfooted
			remove_trait = inbred
			set_character_flag = tournament_third_place
			set_character_flag = attending_tournament
			opinion = {
				modifier = opinion_attending_tournament
				who = ROOT
				years = 100
			}
			reverse_opinion = {
				modifier = opinion_tournament_third_place
				who = ROOT
				years = 10
			}
			random_list = {
				75 = { add_trait = trained_warrior }
				15 = { add_trait = poor_warrior }
				10 = { add_trait = skilled_warrior }
			}
			if = { 
				limit = {
					ROOT = { tier = DUKE }
				}
				wealth = 15
				prestige = 25
				add_character_modifier = { 
					name = normal_tourny_3rd_1
					duration = -1
				}
				set_character_flag = normal_tourny_3rd
			}
			if = { 
				limit = {
					ROOT = { tier = COUNT }
				}
				wealth = 10
				prestige = 10
				add_character_modifier = { 
					name = small_tourny_3rd_1
					duration = -1
				}
				set_character_flag = small_tourny_3rd
			}
		}
	}
}

###
# Rivals duel
###
#Tourney Rival drama
character_event = {
	id = 70061
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70061"
	picture = "GFX_evt_joust"

	min_age = 15
	only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = {
			has_character_flag = tournament_has_ended
		}
		OR = {
			AND = {
				OR = {
					AND = {
						OR = {
							has_character_flag = grand_tourny_2nd
							has_character_flag = grand_tourny_3rd
						}	
						NOT = { has_character_flag = grand_tourny_1st }
					}	
					has_character_modifier = grand_tourny_1st_1
				}	
				top_liege = {
					any_realm_character = {
						has_character_flag = attending_tournament
						OR = {
							has_character_modifier = grand_tourny_1st_2
							has_character_modifier = grand_tourny_1st_3
							has_character_modifier = grand_tourny_1st_4
							has_character_modifier = grand_tourny_1st_5
						}
					}
				}
			}	
			AND = {
				OR = {
					AND = {
						OR = {
							has_character_flag = normal_tourny_2nd
							has_character_flag = normal_tourny_3rd
						}	
						NOT = { has_character_flag = normal_tourny_1st }
					}	
					has_character_modifier = normal_tourny_1st_1
				}	
				any_liege = {
					tier = KING
					any_realm_character = {
						has_character_flag = attending_tournament
						OR = {
							has_character_modifier = normal_tourny_1st_2
							has_character_modifier = normal_tourny_1st_3
							has_character_modifier = normal_tourny_1st_4
							has_character_modifier = normal_tourny_1st_5
						}
					}
				}
			}
			AND = {
				OR = {
					AND = {
						OR = {
							has_character_flag = small_tourny_2nd
							has_character_flag = small_tourny_3rd
						}	
						NOT = { has_character_flag = small_tourny_1st }
					}	
					has_character_modifier = small_tourny_1st_1
				}	
				OR = {
					any_courtier = {
						has_character_flag = attending_tournament
						OR = {
							has_character_modifier = small_tourny_1st_2
							has_character_modifier = small_tourny_1st_3
							has_character_modifier = small_tourny_1st_4
							has_character_modifier = small_tourny_1st_5
						}
					}
					any_liege = {
						tier = DUKE
						any_realm_character = {
							has_character_flag = attending_tournament
							OR = {
								has_character_modifier = small_tourny_1st_2
								has_character_modifier = small_tourny_1st_3
								has_character_modifier = small_tourny_1st_4
								has_character_modifier = small_tourny_1st_5
							}
						}
					}
					any_liege = {
						tier = COUNT
						any_demesne_province = {
							any_neighbor_province = {
								any_province_lord = {
									tier = COUNT
									any_realm_character = {
										has_character_flag = attending_tournament
										OR = {
											has_character_modifier = small_tourny_1st_2
											has_character_modifier = small_tourny_1st_3
											has_character_modifier = small_tourny_1st_4
											has_character_modifier = small_tourny_1st_5
										}
									}
								}	
							}	
						}
					}
					any_demesne_province = {
						any_neighbor_province = {
							any_province_lord = {
								tier = COUNT
								any_realm_character = {
									has_character_flag = attending_tournament
									OR = {
										has_character_modifier = small_tourny_1st_2
										has_character_modifier = small_tourny_1st_3
										has_character_modifier = small_tourny_1st_4
										has_character_modifier = small_tourny_1st_5
									}
								}
							}	
						}	
					}					
				}	
			}
		}
	}
	
	mean_time_to_happen = {
		months = 500
	}

	immediate = {
		set_character_flag = attending_tournament_event
		top_liege = {
			random_realm_character = {
				limit = {
					is_female = no
					has_character_flag = attending_tournament
					OR = {
						AND = {
							ROOT = {
								OR = {
									AND = {
										OR = {
											has_character_flag = grand_tourny_2nd
											has_character_flag = grand_tourny_3rd
										}	
										NOT = { has_character_flag = grand_tourny_1st }
									}	
									has_character_modifier = grand_tourny_1st_1
								}	
							}	
							OR = {
								has_character_modifier = grand_tourny_1st_2
								has_character_modifier = grand_tourny_1st_3
								has_character_modifier = grand_tourny_1st_4
								has_character_modifier = grand_tourny_1st_5
							}
						}	
						AND = {
							ROOT = {
								OR = {
									AND = {
										OR = {
											has_character_flag = normal_tourny_2nd
											has_character_flag = normal_tourny_3rd
										}	
										NOT = { has_character_flag = normal_tourny_1st }
									}	
									has_character_modifier = normal_tourny_1st_1
								}	
							}	
							any_liege = {
								tier = KING
								any_realm_character = { character = ROOT }
							}						
							OR = {
								has_character_modifier = normal_tourny_1st_2
								has_character_modifier = normal_tourny_1st_3
								has_character_modifier = normal_tourny_1st_4
								has_character_modifier = normal_tourny_1st_5
							}
						}
						AND = {
							ROOT = {
								OR = {
									AND = {
										OR = {
											has_character_flag = small_tourny_2nd
											has_character_flag = small_tourny_3rd
										}	
										NOT = { has_character_flag = small_tourny_1st }
									}	
									has_character_modifier = small_tourny_1st_1
								}	
							}	
							OR = {
								has_character_modifier = small_tourny_1st_2
								has_character_modifier = small_tourny_1st_3
								has_character_modifier = small_tourny_1st_4
								has_character_modifier = small_tourny_1st_5
							}
							OR = {
								liege = {
									character = ROOT
								}
								any_liege = {
									tier = DUKE
									any_realm_character = {
										character = ROOT
									}
								}
								any_demesne_province = {
									any_neighbor_province = {
										any_province_lord = {
											tier = COUNT
											any_realm_character = {
												character = ROOT
											}
										}	
									}	
								}
								any_liege = {
									tier = COUNT
									any_demesne_province = {
										any_neighbor_province = {
											any_province_lord = {
												tier = COUNT
												any_realm_character = {
													character = ROOT
												}
											}	
										}	
									}
								}	
							}	
						}
					}			
				}
				reverse_opinion = {
					modifier = opinion_potential_tourny_rival
					who = ROOT
					years = 1
				}
			}
		}
	}	

	option = {
		name = "EVTOPTA70061" #he just jests
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		if = {
			limit = { NOT = { trait = gregarious } }
			random = {
				chance = 25
				add_trait = gregarious
				hidden_tooltip = {
					character_event = { id = 38265 }
				}
			}	
		}	
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 10
				add_trait = craven
				hidden_tooltip = {
					character_event = { id = 38257 }
				}
			}	
		}	
	}
	option = {
		name = "EVTOPTB70061" #I will show him
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = proud 
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		if = {
			limit = { NOT = { trait = proud } }
			random = {
				chance = 25
				add_trait = proud
				hidden_tooltip = {
					character_event = { id = 38261 }
				}
			}	
		}
		top_liege = {
			random_realm_character = {
				limit = {
					reverse_has_opinion_modifier = {
						who = ROOT modifier = opinion_potential_tourny_rival
					}
				}
				if = {
					limit = {
						NOT = {
							has_opinion_modifier = { who = ROOT modifier = opinion_rival }
						}	
					}
					reverse_opinion = {
						modifier = opinion_rival
						who = ROOT
						years = 100
					}
				}	
				character_event = { id = 70062 tooltip = "EVTTOOLTIP70062" }	
			}			
		}		
	}
	option = {
		name = "EVTOPTC70061" #Single combat!
		trigger = {
			NOT = { trait = craven }
			NOT = { trait = weak }
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = wroth
			}
		}
		if = {
			limit = { NOT = { trait = wroth } }
			random = {
				chance = 25
				add_trait = wroth
				hidden_tooltip = {
					character_event = { id = 38254 }
				}
			}					
		}	
		top_liege = {
			random_realm_character = {
				limit = {
					reverse_has_opinion_modifier = {
						who = ROOT modifier = opinion_potential_tourny_rival
					}
				}
				character_event = { id = 70063 tooltip = "EVTTOOLTIP70063" }
			}	
		}
	}
}

#other character is informed of rivalry
character_event = {
	id = 70062
	desc = "EVTDESC70062"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70062"
		if = {
			limit = {
				NOT = {
					has_opinion_modifier = { who = FROM modifier = opinion_rival }
				}	
			}
			opinion = {
				modifier = opinion_rival
				who = FROM
				years = 100
			}
		}	
	}
}

#other character is informed of challenge to single combat!
character_event = {
	id = 70063
	desc = "EVTDESC70063"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70063" #apologise profusely
		ai_chance = {
			factor = 10
			modifier = {
				factor = 1.5
				trait = gregarious
			}
			modifier = {
				factor = 1.5
				trait = craven
			}
		}
		prestige = -30
		if = {
			limit = { NOT = { trait = craven } }
			random = {
				chance = 25
				add_trait = craven
				hidden_tooltip = {
					character_event = { id = 38257 }
				}
			}	
		}	
		FROM = { character_event = { id = 70064 tooltip = "EVTTOOLTIP70064" } }
	}
	option = {
		name = "EVTOPTB70063" #I accept!
		ai_chance = {
			factor = 10
			modifier = {
				factor = 2
				trait = wroth
			}
		}
		set_character_flag = tourny_duel_defender
		set_character_flag = flag_duel_friendly
		FROM = { set_character_flag = tourny_duel_agressor }
		FROM = { set_character_flag = flag_duel_friendly }
		hidden_tooltip = { e_rebels = { holder_scope = { character_event = { id = duel.1 } } } }
	}
}

#inform root of apology
character_event = {
	id = 70064
	desc = "EVTDESC70064"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70064"
		prestige = 30
	}
}

#inform root of win
character_event = {
	id = 70065
	desc = "EVTDESC70065"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70065"
		prestige = 30
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70071 } 
				}
				any_realm_lord = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}	
					character_event = { id = 70071 } 
				}	
			}
			clr_character_flag = tourny_duel_agressor
		}
	}
}

#inform root of draw
character_event = {
	id = 70066
	desc = "EVTDESC70066"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70066"
		prestige = -5
		if = {
			limit = {
				NOT = {
					has_opinion_modifier = { who = FROM modifier = opinion_rival }
				}
			}	
			opinion = {
				modifier = opinion_rival
				who = FROM
				years = 100
			}
		}	
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70072 } 
				}
				any_realm_lord = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}	
					character_event = { id = 70072 } 
				}	
			}
			clr_character_flag = tourny_duel_agressor
		}
	}
}

#inform root of loss
character_event = {
	id = 70067
	desc = "EVTDESC70067"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70067"
		prestige = -30
		hidden_tooltip = {
			top_liege = {
				if = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}
					character_event = { id = 70073 } 
				}
				any_realm_lord = {
					limit = {
						reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					}	
					character_event = { id = 70073 } 
				}	
			}
			clr_character_flag = tourny_duel_agressor
		}
	}
}

#inform from of loss
character_event = {
	id = 70068
	desc = "EVTDESC70068"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70068"
		prestige = -30
		hidden_tooltip = { clr_character_flag = tourny_duel_defender }
	}
}

#inform from of draw
character_event = {
	id = 70069
	desc = "EVTDESC70069"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70066"
		prestige = -5
		hidden_tooltip = { clr_character_flag = tourny_duel_defender }
	}
}

#inform from of win
character_event = {
	id = 70070
	desc = "EVTDESC70070"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70065"
		prestige = 30
		hidden_tooltip = { clr_character_flag = tourny_duel_defender }
	}
}

#inform tourny holder of duel
character_event = {
	id = 70071
	desc = "EVTDESC70071"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70071"
		top_liege = {
			random_realm_character = {
				limit = {
					character = FROMFROM
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
}

#inform tourny holder of duel
character_event = {
	id = 70072
	desc = "EVTDESC70072"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70071"
		top_liege = {
			random_realm_character = {
				limit = {
					character = FROMFROM
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
}

#inform tourny holder of duel
character_event = {
	id = 70073
	desc = "EVTDESC70073"
	picture = "GFX_evt_melee"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70071"
		top_liege = {
			random_realm_character = {
				limit = {
					character = FROMFROM
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
}

###
# Medal ceremony (decision)
###
#show me the medal winners
character_event = {
	id = 70078
	desc = "EVTDESC70078"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70078" #Grand tourny
		hidden_tooltip = {
			character_event = { id = 70079 }
		}	
	}
	option = {
		name = "EVTOPTB70078" #Regional tourny
		hidden_tooltip = {
			character_event = { id = 70080 }
		}	
	}
	option = {
		name = "EVTOPTC70078" #Local tourny
		hidden_tooltip = {
			character_event = { id = 70081  }
		}	
	}
}

#grand tourny medals
character_event = {
	id = 70079
	desc = "EVTDESC70079"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70079" #1st
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = grand_tourny_1st
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
	option = {
		name = "EVTOPTB70079" #2nd
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = grand_tourny_2nd
					NOT = { has_character_flag = grand_tourny_1st }
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
	option = {
		name = "EVTOPTC70079" #3rd
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = grand_tourny_3rd
					NOT = { has_character_flag = grand_tourny_1st }
					NOT = { has_character_flag = grand_tourny_2nd }
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
}

#normal tourny medals
character_event = {
	id = 70080
	desc = "EVTDESC70080"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70079" #1st
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = normal_tourny_1st
					OR = {
						any_liege = { character = ROOT }
						any_liege = { 
							tier = KING
							any_realm_lord = { character = ROOT }
						}
						AND = {
							NOT = { any_liege = { tier = KING } }
							NOT = { tier = KING }
							any_liege = {
								tier = EMPEROR
								any_realm_lord = { character = ROOT }
							}
						}
					}	
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
	option = {
		name = "EVTOPTB70079" #2nd
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = normal_tourny_2nd
					NOT = { has_character_flag = normal_tourny_1st }
					OR = {
						any_vassal = { character = ROOT }
						any_liege = { character = ROOT }
						any_liege = { 
							tier = KING
							any_realm_lord = { character = ROOT }
						}
						AND = {
							NOT = { any_liege = { tier = KING } }
							NOT = { tier = KING }
							any_liege = {
								tier = EMPEROR
								any_realm_lord = { character = ROOT }
							}
						}
					}	
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
	option = {
		name = "EVTOPTC70079" #3rd
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = normal_tourny_3rd
					NOT = { has_character_flag = normal_tourny_1st }
					NOT = { has_character_flag = normal_tourny_2nd }
					OR = {
						any_liege = { character = ROOT }
						any_liege = { 
							tier = KING
							any_realm_lord = { character = ROOT }
						}
						AND = {
							NOT = { any_liege = { tier = KING } }
							NOT = { tier = KING }
							any_liege = {
								tier = EMPEROR
								any_realm_lord = { character = ROOT }
							}
						}
					}	
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
}

#small tourny medals
character_event = {
	id = 70081
	desc = "EVTDESC70081"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70079" #1st
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = small_tourny_1st
					OR = {
						any_vassal = { character = ROOT }
						any_liege = { character = ROOT }
						AND = {
							tier = COUNT
							any_demesne_province = {
								any_neighbor_province = {
									any_province_lord = {
										character = ROOT
									}
								}
							}	
						}
						any_liege = {
							tier = COUNT
							any_demesne_province = {
								any_neighbor_province = {
									any_province_lord = {
										character = ROOT
									}
								}
							}	
						}
						AND = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {
											character = ROOT
										}
									}
								}
							}
						}	
						any_liege = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {
											character = ROOT
										}
									}
								}
							}
						}	
						AND = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {	
											any_demesne_province = {
												any_neighbor_province = {													
													any_province_lord = {
														character = ROOT
													}
												}
											}			
										}
									}
								}
							}
						}	
					}	
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
	option = {
		name = "EVTOPTB70079" #2nd
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = small_tourny_2nd
					NOT = { has_character_flag = small_tourny_1st }
					OR = {
						any_vassal = { character = ROOT }
						any_liege = { character = ROOT }
						AND = {
							tier = COUNT
							any_demesne_province = {
								any_neighbor_province = {
									any_province_lord = {
										character = ROOT
									}
								}
							}	
						}
						any_liege = {
							tier = COUNT
							any_demesne_province = {
								any_neighbor_province = {
									any_province_lord = {
										character = ROOT
									}
								}
							}	
						}
						AND = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {
											character = ROOT
										}
									}
								}
							}
						}	
						any_liege = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {
											character = ROOT
										}
									}
								}
							}
						}	
						AND = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {	
											any_demesne_province = {
												any_neighbor_province = {													
													any_province_lord = {
														character = ROOT
													}
												}
											}			
										}
									}
								}
							}
						}	
					}	
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
	option = {
		name = "EVTOPTC70079" #3rd
		top_liege = {
			any_realm_character = {
				limit = {
					has_character_flag = small_tourny_3rd
					NOT = { has_character_flag = small_tourny_1st }
					NOT = { has_character_flag = small_tourny_2nd }
					OR = {
						any_vassal = { character = ROOT }
						any_liege = { character = ROOT }
						AND = {
							tier = COUNT
							any_demesne_province = {
								any_neighbor_province = {
									any_province_lord = {
										character = ROOT
									}
								}
							}	
						}
						any_liege = {
							tier = COUNT
							any_demesne_province = {
								any_neighbor_province = {
									any_province_lord = {
										character = ROOT
									}
								}
							}	
						}
						AND = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {
											character = ROOT
										}
									}
								}
							}
						}	
						any_liege = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {
											character = ROOT
										}
									}
								}
							}
						}	
						AND = {
							tier = COUNT
							any_demesne_province = {
								duchy = {
									holder_scope = {
										tier = DUKE
										any_vassal = {	
											any_demesne_province = {
												any_neighbor_province = {													
													any_province_lord = {
														character = ROOT
													}
												}
											}			
										}
									}
								}
							}
						}	
					}	
				}
				hidden_tooltip = { prestige = 0 }
			}
		}
	}
}

###
# Drunkard at tournament
###
character_event = { #drunkard embarasses himself
	id = 70082
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70082"
	picture = "GFX_evt_drunk"

	#min_age = 16
	only_men = yes
	capable_only = yes
	prisoner = no
	
	trigger = {
		is_adult = yes
		trait = drunkard
		has_character_flag = attending_tournament
		NOT = { has_character_flag = attending_tournament_event }
		NOT = { has_character_flag = tournament_has_ended }
		NOT = { has_character_flag = tournament_third_place }
		NOT = { has_character_flag = tournament_second_place }
		NOT = { has_character_flag = tournament_winner }
		NOT = { trait = wounded	}
		NOT = {	trait = maimed }
		OR = {
			any_liege = {
				reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				has_character_flag = tournament_begins
				NOT = {
					has_character_flag = tournament_has_ended
				}
			}
			top_liege = {
				any_realm_lord = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
					has_character_flag = tournament_begins
					NOT = {
						has_character_flag = tournament_has_ended
					}
				}	
			}
		}
	}

	mean_time_to_happen = {
		months = 500
		modifier = {
			factor = 1.25
			trait = quick #knows when not to drink
		}
		modifier = {
			factor = 1.50
			trait = genius #knows when not to drink
		}
		modifier = {
			factor = 1.50
			trait = slow #will fuck up things
		}
		modifier = { #
			factor = 2
			trait = craven
		}
		modifier = {
			factor = 0.5 #bravery clouds his mind
			trait = brave
		}
	}

	immediate = {
		set_character_flag = embarrased_drunkard
	}
	
	option = {
		name = "EVTOPTA70082"
		top_liege = {
			if = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				}
				character_event = { id = 70083 } 
			}	
			any_realm_lord = {
				limit = {
					reverse_has_opinion_modifier = { who = ROOT modifier = opinion_attending_tournament }
				}	
				character_event = { id = 70083 } 
			}	
		}
	}
}

character_event = { #liege decide on drunkard fate
	id = 70083
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70083"
	picture = "GFX_evt_drunk"

	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70083" #tournament host likes you or is drunkard. a good laugh, but prestige lost
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				trait = drunkard
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  0 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  20 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  40 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  60 }
			}
			modifier = {
				factor = 1.2
				opinion = { who = FROM value =  80 }
			}
		}
		FROM = { 
			hidden_tooltip =  { 
				character_event = { id = 70085 } 
			}			
		}
	}
	option = {
		name = "EVTOPTB70083" #tournament host is wroth or proud. he's very pissed and kick you out of the tournament.
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				OR = {
					trait = wroth
					trait = proud
				}
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value = -100 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value = -80 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value = -60 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value = -40 } }
			}
			modifier = {
				factor = 1.2
				NOT = { opinion = { who = FROM value = -20 } }
			}
		}
		FROM = {
			hidden_tooltip =  { 
				character_event = { id = 70084 } 
			}
		}
	}
}

character_event = { #tournament is over for you #bad
	id = 70084
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70084"
	picture = "GFX_evt_drunk"

	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70084" #
		hidden_tooltip = {	
			remove_opinion = {
				modifier = opinion_attending_tournament
				who = FROM
			}
		}
		prestige = -20 
		add_character_modifier = {
			name = drunken_tournament
			duration = -1
		}	
		clr_character_flag = attending_tournament
		clr_character_flag = attending_tournament_event
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
	}
}

character_event = { #tournament is over for you #not so bad
	id = 70085
	#title = "TOURNAMENTTITLE"
	desc = "EVTDESC70085"
	picture = "GFX_evt_drunk"

	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70085" #
		hidden_tooltip = {	
			remove_opinion = {
				modifier = opinion_attending_tournament
				who = FROM
			}
		}
		prestige = -10
		add_character_modifier = {
			name = drunken_tournament
			duration = -1
		}
		clr_character_flag = attending_tournament
		clr_character_flag = attending_tournament_event
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
	}
}

###
#more information for participants
###

# Inform participant about winner
character_event = {
	id = 70052
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70052"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70052"
		trigger = { 
			OR = {
				NOT = { has_character_flag = tournament_spectator }
				FROM = {
					FROM = {
						NOT = { dynasty = ROOT }
					}
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70087"
		trigger = { 
			has_character_flag = tournament_spectator 
			FROM = {
				FROM = {
					dynasty = ROOT
					NOT = { is_close_relative = ROOT }
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTC70087"
		trigger = { 
			has_character_flag = tournament_spectator 
			FROM = {
				FROM = {
					dynasty = ROOT
					is_close_relative = ROOT
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = {
				has_character_flag = king_tourny
			}
			prestige = 75
		}
		if = { 
			limit = {
				has_character_flag = grand_tourny
			}
			prestige = 50
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			prestige = 25
		}	
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			prestige = 10
		}
	}
}

# Inform participant about second place
character_event = {
	id = 70087
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70087"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70087"
		trigger = { 
			OR = {
				NOT = { has_character_flag = tournament_spectator }
				FROM = {
					FROM = {
						NOT = { dynasty = ROOT }
					}
				}
			}	
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70087"
		trigger = { 
			has_character_flag = tournament_spectator 
			FROM = {
				FROM = {
					dynasty = ROOT
					NOT = { is_close_relative = ROOT }
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTC70087"
		trigger = { 
			has_character_flag = tournament_spectator 
			FROM = {
				FROM = {
					dynasty = ROOT
					is_close_relative = ROOT
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = {
				has_character_flag = king_tourny
			}
			prestige = 50
		}
		if = { 
			limit = {
				has_character_flag = grand_tourny
			}
			prestige = 25
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			prestige = 10
		}	
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			prestige = 5
		}
	}
}

# Inform participant about third place
character_event = {
	id = 70088
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70088"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70088"
		trigger = { 
			OR = {
				NOT = { has_character_flag = tournament_spectator }
				FROM = {
					FROM = {
						NOT = { dynasty = ROOT }
					}
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70087"
		trigger = { 
			has_character_flag = tournament_spectator 
			FROM = {
				FROM = {
					dynasty = ROOT
					NOT = { is_close_relative = ROOT }
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTC70087"
		trigger = { 
			has_character_flag = tournament_spectator 
			FROM = {
				FROM = {
					dynasty = ROOT
					is_close_relative = ROOT
				}
			}
		}
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = {
				has_character_flag = king_tourny
			}
			prestige = 25
		}
		if = { 
			limit = {
				has_character_flag = grand_tourny
			}
			prestige = 15
		}
		if = { 
			limit = {
				has_character_flag = normal_tourny
			}
			prestige = 10
		}	
		if = { 
			limit = {
				has_character_flag = small_tourny
			}
			prestige = 5
		}
	}
}

# Inform participant about death
character_event = {
	id = 70089
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70089"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_character_flag = no_msg_death }
	}
	
	option = {
		name = "EVTOPTA70089"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70038"
		set_character_flag = no_msg_death
	}
}

# Inform participant about maimed
character_event = {
	id = 70090
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70090"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_character_flag = no_msg_maimed }
	}
	
	option = {
		name = "EVTOPTA70089"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70038"
		set_character_flag = no_msg_maimed
	}
}

# Inform participant about wounded
character_event = {
	id = 70091
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70091"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_character_flag = no_msg_wounded }
	}
	
	option = {
		name = "EVTOPTA70089"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
	}
	option = {
		name = "EVTOPTB70038"
		set_character_flag = no_msg_wounded
	}
}

###
# information for spectators
###
# Inform spectator tourney finished
character_event = {
	id = 70092
	title = "TOURNAMENTTITLE2"
	desc = "EVTDESC70092"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTA70092"
		hidden_tooltip = {	
			remove_opinion = {
				modifier = opinion_spectating_tournament
				who = ROOT
			}
		}
		clr_character_flag = attending_tournament
		clr_character_flag = tournament_spectator
		clr_character_flag = attending_tournament_event
		clr_character_flag = king_tourny
		clr_character_flag = grand_tourny
		clr_character_flag = normal_tourny
		clr_character_flag = small_tourny
	}
}

# Inform spectator of relative's great outcome
character_event = {
	id = 70095
	title = "TOURNAMENTTITLE4"
	desc = "EVTDESC70095"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTC70095"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = { FROM = { FROM = { tier = EMPEROR } } }
			prestige = 15
		}	
		if = { 
			limit = { FROM = { FROM = { tier = KING } } }
			prestige = 8
		}
		if = { 
			limit = { FROM = { FROM = { tier = DUKE } } }
			prestige = 4
		}
		if = { 
			limit = { FROM = { FROM = { tier = COUNT } } }
			prestige = 2
		}	
	}
}

# Inform spectator of relative's good outcome
character_event = {
	id = 70096
	title = "TOURNAMENTTITLE4"
	desc = "EVTDESC70096"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTC70096"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = { FROM = { FROM = { tier = EMPEROR } } }
			prestige = 8
		}	
		if = { 
			limit = { FROM = { FROM = { tier = KING } } }
			prestige = 5
		}
		if = { 
			limit = { FROM = { FROM = { tier = DUKE } } }
			prestige = 3
		}
		if = { 
			limit = { FROM = { FROM = { tier = COUNT } } }
			prestige = 1
		}	
	}
}

# Inform spectator of relative's bad outcome
character_event = {
	id = 70097
	title = "TOURNAMENTTITLE4"
	desc = "EVTDESC70097"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTC70097"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = { FROM = { FROM = { tier = EMPEROR } } }
			prestige = -8
		}	
		if = { 
			limit = { FROM = { FROM = { tier = KING } } }
			prestige = -5
		}
		if = { 
			limit = { FROM = { FROM = { tier = DUKE } } }
			prestige = -3
		}
		if = { 
			limit = { FROM = { FROM = { tier = COUNT } } }
			prestige = -1
		}	
	}
}

# Inform spectator of relative's very bad outcome
character_event = {
	id = 70098
	title = "TOURNAMENTTITLE4"
	desc = "EVTDESC70098"
	picture = "GFX_evt_joust"
	
	is_triggered_only = yes
	
	option = {
		name = "EVTOPTC70098"
		FROM = {
			FROM = {
				tooltip = { }
			}
		}
		if = { 
			limit = { FROM = { FROM = { tier = EMPEROR } } }
			prestige = -15
		}	
		if = { 
			limit = { FROM = { FROM = { tier = KING } } }
			prestige = -8
		}
		if = { 
			limit = { FROM = { FROM = { tier = DUKE } } }
			prestige = -4
		}
		if = { 
			limit = { FROM = { FROM = { tier = COUNT } } }
			prestige = -2
		}	
	}
}